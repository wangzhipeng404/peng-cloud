"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunkonline_conplier"] = self["webpackChunkonline_conplier"] || []).push([["src_views_tmagic_playground_vue"],{

/***/ "./node_modules/events/events.js":
/*!***************************************!*\
  !*** ./node_modules/events/events.js ***!
  \***************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("/* provided dependency */ var console = __webpack_require__(/*! ./node_modules/console-browserify/index.js */ \"./node_modules/console-browserify/index.js\");\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n\n__webpack_require__(/*! core-js/modules/es.error.cause.js */ \"./node_modules/core-js/modules/es.error.cause.js\");\n\n__webpack_require__(/*! core-js/modules/es.array.push.js */ \"./node_modules/core-js/modules/es.array.push.js\");\n\n__webpack_require__(/*! core-js/modules/es.array.unshift.js */ \"./node_modules/core-js/modules/es.array.unshift.js\");\n\nvar R = typeof Reflect === 'object' ? Reflect : null;\nvar ReflectApply = R && typeof R.apply === 'function' ? R.apply : function ReflectApply(target, receiver, args) {\n  return Function.prototype.apply.call(target, receiver, args);\n};\nvar ReflectOwnKeys;\n\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys;\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n};\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\n\nmodule.exports = EventEmitter;\nmodule.exports.once = once; // Backwards-compat with node 0.10.x\n\nEventEmitter.EventEmitter = EventEmitter;\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined; // By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\n\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function () {\n    return defaultMaxListeners;\n  },\n  set: function (arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function () {\n  if (this._events === undefined || this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n}; // Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\n\n\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined) return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n\n  var doError = type === 'error';\n  var events = this._events;\n  if (events !== undefined) doError = doError && events.error === undefined;else if (!doError) return false; // If there is no 'error' event listener then throw.\n\n  if (doError) {\n    var er;\n    if (args.length > 0) er = args[0];\n\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    } // At least give some kind of context to the user\n\n\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n  if (handler === undefined) return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n\n    for (var i = 0; i < len; ++i) ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n  checkListener(listener);\n  events = target._events;\n\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type, listener.listener ? listener.listener : listener); // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n\n      events = target._events;\n    }\n\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] = prepend ? [listener, existing] : [existing, listener]; // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    } // Check for listener leak\n\n\n    m = _getMaxListeners(target);\n\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true; // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n\n      var w = new Error('Possible EventEmitter memory leak detected. ' + existing.length + ' ' + String(type) + ' listeners ' + 'added. Use emitter.setMaxListeners() to ' + 'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener = function prependListener(type, listener) {\n  return _addListener(this, type, listener, true);\n};\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0) return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = {\n    fired: false,\n    wrapFn: undefined,\n    target: target,\n    type: type,\n    listener: listener\n  };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener = function prependOnceListener(type, listener) {\n  checkListener(listener);\n  this.prependListener(type, _onceWrap(this, type, listener));\n  return this;\n}; // Emits a 'removeListener' event if and only if the listener was removed.\n\n\nEventEmitter.prototype.removeListener = function removeListener(type, listener) {\n  var list, events, position, i, originalListener;\n  checkListener(listener);\n  events = this._events;\n  if (events === undefined) return this;\n  list = events[type];\n  if (list === undefined) return this;\n\n  if (list === listener || list.listener === listener) {\n    if (--this._eventsCount === 0) this._events = Object.create(null);else {\n      delete events[type];\n      if (events.removeListener) this.emit('removeListener', type, list.listener || listener);\n    }\n  } else if (typeof list !== 'function') {\n    position = -1;\n\n    for (i = list.length - 1; i >= 0; i--) {\n      if (list[i] === listener || list[i].listener === listener) {\n        originalListener = list[i].listener;\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0) return this;\n    if (position === 0) list.shift();else {\n      spliceOne(list, position);\n    }\n    if (list.length === 1) events[type] = list[0];\n    if (events.removeListener !== undefined) this.emit('removeListener', type, originalListener || listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(type) {\n  var listeners, events, i;\n  events = this._events;\n  if (events === undefined) return this; // not listening for removeListener, no need to emit\n\n  if (events.removeListener === undefined) {\n    if (arguments.length === 0) {\n      this._events = Object.create(null);\n      this._eventsCount = 0;\n    } else if (events[type] !== undefined) {\n      if (--this._eventsCount === 0) this._events = Object.create(null);else delete events[type];\n    }\n\n    return this;\n  } // emit removeListener for all listeners on all events\n\n\n  if (arguments.length === 0) {\n    var keys = Object.keys(events);\n    var key;\n\n    for (i = 0; i < keys.length; ++i) {\n      key = keys[i];\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n\n    this.removeAllListeners('removeListener');\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n    return this;\n  }\n\n  listeners = events[type];\n\n  if (typeof listeners === 'function') {\n    this.removeListener(type, listeners);\n  } else if (listeners !== undefined) {\n    // LIFO order\n    for (i = listeners.length - 1; i >= 0; i--) {\n      this.removeListener(type, listeners[i]);\n    }\n  }\n\n  return this;\n};\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n  if (events === undefined) return [];\n  var evlistener = events[type];\n  if (evlistener === undefined) return [];\n  if (typeof evlistener === 'function') return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n  return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function (emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\n\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n\n  for (var i = 0; i < n; ++i) copy[i] = arr[i];\n\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++) list[index] = list[index + 1];\n\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n\n      resolve([].slice.call(arguments));\n    }\n\n    ;\n    eventTargetAgnosticAddListener(emitter, name, resolver, {\n      once: true\n    });\n\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, {\n        once: true\n      });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n\n//# sourceURL=webpack://online-conplier/./node_modules/events/events.js?");

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/tmagic/playground.vue?vue&type=script&lang=js":
/*!**********************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/tmagic/playground.vue?vue&type=script&lang=js ***!
  \**********************************************************************************************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.error.cause.js */ \"./node_modules/core-js/modules/es.error.cause.js\");\n/* harmony import */ var core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! vue */ \"vue\");\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(vue__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _tmagic_core__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tmagic/core */ \"./node_modules/@tmagic/core/dist/tmagic-core.mjs\");\n/* harmony import */ var _tmagic_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @tmagic/utils */ \"./node_modules/@tmagic/utils/dist/tmagic-utils.mjs\");\n/* provided dependency */ var console = __webpack_require__(/*! ./node_modules/console-browserify/index.js */ \"./node_modules/console-browserify/index.js\");\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ((0,vue__WEBPACK_IMPORTED_MODULE_1__.defineComponent)({\n  setup() {\n    const root = (0,vue__WEBPACK_IMPORTED_MODULE_1__.ref)();\n    const curPageId = (0,vue__WEBPACK_IMPORTED_MODULE_1__.ref)();\n    const selectedId = (0,vue__WEBPACK_IMPORTED_MODULE_1__.ref)();\n    const pageConfig = (0,vue__WEBPACK_IMPORTED_MODULE_1__.computed)(() => root.value?.items?.find(item => item.id === curPageId.value) || root.value?.items?.[0]);\n    const app = new _tmagic_core__WEBPACK_IMPORTED_MODULE_2__[\"default\"]({\n      config: root.value,\n      platform: 'editor'\n    });\n    (0,vue__WEBPACK_IMPORTED_MODULE_1__.provide)('app', app);\n    (0,vue__WEBPACK_IMPORTED_MODULE_1__.watch)(pageConfig, async () => {\n      await (0,vue__WEBPACK_IMPORTED_MODULE_1__.nextTick)();\n      const page = document.querySelector('.magic-ui-page');\n      console.log(page, window.magic);\n      page && window.magic.onPageElUpdate(page);\n    });\n    console.log(window.magic);\n    window.magic?.onRuntimeReady({\n      getApp() {\n        return app;\n      },\n\n      updateRootConfig(config) {\n        console.log('update config', config);\n        root.value = config;\n        app?.setConfig(config, curPageId.value);\n      },\n\n      updatePageId(id) {\n        console.log('update page id', id);\n        curPageId.value = id;\n        app?.setPage(id);\n      },\n\n      select(id) {\n        console.log('select config', id);\n        selectedId.value = id;\n        const el = document.getElementById(`${id}`);\n        console.log(el);\n        if (el) return el;\n        console.log('未找到'); // 未在当前文档下找到目标元素，可能是还未渲染，等待渲染完成后再尝试获取\n\n        return (0,vue__WEBPACK_IMPORTED_MODULE_1__.nextTick)().then(() => document.getElementById(`${id}`));\n      },\n\n      add({\n        config,\n        parentId\n      }) {\n        console.log('add config', config, curPageId.value);\n        if (!root.value) throw new Error('error');\n        if (!selectedId.value) throw new Error('error');\n\n        if (!parentId) {\n          parentId = curPageId.value; // throw new Error('error');\n        }\n\n        const parent = (0,_tmagic_utils__WEBPACK_IMPORTED_MODULE_3__.getNodePath)(parentId, [root.value]).pop();\n        if (!parent) throw new Error('未找到父节点');\n\n        if (parent.id !== selectedId.value) {\n          const index = parent.items?.findIndex(child => child.id === selectedId.value);\n          parent.items?.splice(index + 1, 0, config);\n        } else {\n          // 新增节点添加到配置中\n          parent.items?.push(config);\n        }\n      },\n\n      update({\n        config,\n        parentId\n      }) {\n        console.log('update config', config);\n        if (!root.value) throw new Error('error');\n        const node = (0,_tmagic_utils__WEBPACK_IMPORTED_MODULE_3__.getNodePath)(config.id, [root.value]).pop();\n\n        if (!parentId) {\n          parentId = curPageId.value; // throw new Error('error');\n        }\n\n        const parent = (0,_tmagic_utils__WEBPACK_IMPORTED_MODULE_3__.getNodePath)(parentId, [root.value]).pop();\n        if (!node) throw new Error('未找到目标节点');\n        if (!parent) throw new Error('未找到父节点');\n        const index = parent.items?.findIndex(child => child.id === node.id);\n        parent.items.splice(index, 1, (0,vue__WEBPACK_IMPORTED_MODULE_1__.reactive)(config));\n      },\n\n      remove({\n        id,\n        parentId\n      }) {\n        if (!root.value) throw new Error('error');\n        const node = (0,_tmagic_utils__WEBPACK_IMPORTED_MODULE_3__.getNodePath)(id, [root.value]).pop();\n        if (!node) throw new Error('未找到目标元素');\n        const parent = (0,_tmagic_utils__WEBPACK_IMPORTED_MODULE_3__.getNodePath)(parentId, [root.value]).pop();\n        if (!parent) throw new Error('未找到父元素');\n        const index = parent.items?.findIndex(child => child.id === node.id);\n        parent.items.splice(index, 1);\n      }\n\n    });\n    return {\n      pageConfig\n    };\n  }\n\n}));\n\n//# sourceURL=webpack://online-conplier/./src/views/tmagic/playground.vue?./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use%5B0%5D!./node_modules/vue-loader/dist/index.js??ruleSet%5B0%5D.use%5B0%5D");

/***/ }),

/***/ "./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/tmagic/playground.vue?vue&type=template&id=1f8a8eb2":
/*!**************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/tmagic/playground.vue?vue&type=template&id=1f8a8eb2 ***!
  \**************************************************************************************************************************************************************************************************************************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"render\": function() { return /* binding */ render; }\n/* harmony export */ });\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ \"vue\");\n/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(vue__WEBPACK_IMPORTED_MODULE_0__);\n\nfunction render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_magic_ui_page = (0,vue__WEBPACK_IMPORTED_MODULE_0__.resolveComponent)(\"magic-ui-page\");\n\n  return _ctx.pageConfig ? ((0,vue__WEBPACK_IMPORTED_MODULE_0__.openBlock)(), (0,vue__WEBPACK_IMPORTED_MODULE_0__.createBlock)(_component_magic_ui_page, {\n    key: 0,\n    config: _ctx.pageConfig\n  }, null, 8\n  /* PROPS */\n  , [\"config\"])) : (0,vue__WEBPACK_IMPORTED_MODULE_0__.createCommentVNode)(\"v-if\", true);\n}\n\n//# sourceURL=webpack://online-conplier/./src/views/tmagic/playground.vue?./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use%5B0%5D!./node_modules/vue-loader/dist/templateLoader.js??ruleSet%5B1%5D.rules%5B4%5D!./node_modules/vue-loader/dist/index.js??ruleSet%5B0%5D.use%5B0%5D");

/***/ }),

/***/ "./node_modules/core-js/internals/delete-property-or-throw.js":
/*!********************************************************************!*\
  !*** ./node_modules/core-js/internals/delete-property-or-throw.js ***!
  \********************************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("\nvar tryToString = __webpack_require__(/*! ../internals/try-to-string */ \"./node_modules/core-js/internals/try-to-string.js\");\n\nvar $TypeError = TypeError;\n\nmodule.exports = function (O, P) {\n  if (!delete O[P]) throw $TypeError('Cannot delete property ' + tryToString(P) + ' of ' + tryToString(O));\n};\n\n\n//# sourceURL=webpack://online-conplier/./node_modules/core-js/internals/delete-property-or-throw.js?");

/***/ }),

/***/ "./node_modules/core-js/modules/es.array.unshift.js":
/*!**********************************************************!*\
  !*** ./node_modules/core-js/modules/es.array.unshift.js ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, __unused_webpack_exports, __webpack_require__) {

eval("\nvar $ = __webpack_require__(/*! ../internals/export */ \"./node_modules/core-js/internals/export.js\");\nvar toObject = __webpack_require__(/*! ../internals/to-object */ \"./node_modules/core-js/internals/to-object.js\");\nvar lengthOfArrayLike = __webpack_require__(/*! ../internals/length-of-array-like */ \"./node_modules/core-js/internals/length-of-array-like.js\");\nvar deletePropertyOrThrow = __webpack_require__(/*! ../internals/delete-property-or-throw */ \"./node_modules/core-js/internals/delete-property-or-throw.js\");\nvar doesNotExceedSafeInteger = __webpack_require__(/*! ../internals/does-not-exceed-safe-integer */ \"./node_modules/core-js/internals/does-not-exceed-safe-integer.js\");\n\n// IE8-\nvar INCORRECT_RESULT = [].unshift(0) !== 1;\n\n// V8 ~ Chrome < 71 and Safari <= 15.4, FF < 23 throws InternalError\nvar SILENT_ON_NON_WRITABLE_LENGTH = !function () {\n  try {\n    // eslint-disable-next-line es-x/no-object-defineproperty -- safe\n    Object.defineProperty([], 'length', { writable: false }).unshift();\n  } catch (error) {\n    return error instanceof TypeError;\n  }\n}();\n\n// `Array.prototype.unshift` method\n// https://tc39.es/ecma262/#sec-array.prototype.unshift\n$({ target: 'Array', proto: true, arity: 1, forced: INCORRECT_RESULT || SILENT_ON_NON_WRITABLE_LENGTH }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  unshift: function unshift(item) {\n    var O = toObject(this);\n    var len = lengthOfArrayLike(O);\n    var argCount = arguments.length;\n    if (argCount) {\n      doesNotExceedSafeInteger(len + argCount);\n      var k = len;\n      while (k--) {\n        var to = k + argCount;\n        if (k in O) O[to] = O[k];\n        else deletePropertyOrThrow(O, to);\n      }\n      for (var j = 0; j < argCount; j++) {\n        O[j] = arguments[j];\n      }\n    } return O.length = len + argCount;\n  }\n});\n\n\n//# sourceURL=webpack://online-conplier/./node_modules/core-js/modules/es.array.unshift.js?");

/***/ }),

/***/ "./src/views/tmagic/playground.vue":
/*!*****************************************!*\
  !*** ./src/views/tmagic/playground.vue ***!
  \*****************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _playground_vue_vue_type_template_id_1f8a8eb2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./playground.vue?vue&type=template&id=1f8a8eb2 */ \"./src/views/tmagic/playground.vue?vue&type=template&id=1f8a8eb2\");\n/* harmony import */ var _playground_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./playground.vue?vue&type=script&lang=js */ \"./src/views/tmagic/playground.vue?vue&type=script&lang=js\");\n/* harmony import */ var D_Code_vue_onlie_editor_node_modules_vue_loader_dist_exportHelper_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./node_modules/vue-loader/dist/exportHelper.js */ \"./node_modules/vue-loader/dist/exportHelper.js\");\n\n\n\n\n;\nconst __exports__ = /*#__PURE__*/(0,D_Code_vue_onlie_editor_node_modules_vue_loader_dist_exportHelper_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"])(_playground_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_1__[\"default\"], [['render',_playground_vue_vue_type_template_id_1f8a8eb2__WEBPACK_IMPORTED_MODULE_0__.render],['__file',\"src/views/tmagic/playground.vue\"]])\n/* hot reload */\nif (false) {}\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (__exports__);\n\n//# sourceURL=webpack://online-conplier/./src/views/tmagic/playground.vue?");

/***/ }),

/***/ "./src/views/tmagic/playground.vue?vue&type=script&lang=js":
/*!*****************************************************************!*\
  !*** ./src/views/tmagic/playground.vue?vue&type=script&lang=js ***!
  \*****************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* reexport safe */ _node_modules_babel_loader_lib_index_js_clonedRuleSet_40_use_0_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_playground_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"]; }\n/* harmony export */ });\n/* harmony import */ var _node_modules_babel_loader_lib_index_js_clonedRuleSet_40_use_0_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_playground_vue_vue_type_script_lang_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./playground.vue?vue&type=script&lang=js */ \"./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/tmagic/playground.vue?vue&type=script&lang=js\");\n \n\n//# sourceURL=webpack://online-conplier/./src/views/tmagic/playground.vue?");

/***/ }),

/***/ "./src/views/tmagic/playground.vue?vue&type=template&id=1f8a8eb2":
/*!***********************************************************************!*\
  !*** ./src/views/tmagic/playground.vue?vue&type=template&id=1f8a8eb2 ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"render\": function() { return /* reexport safe */ _node_modules_babel_loader_lib_index_js_clonedRuleSet_40_use_0_node_modules_vue_loader_dist_templateLoader_js_ruleSet_1_rules_4_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_playground_vue_vue_type_template_id_1f8a8eb2__WEBPACK_IMPORTED_MODULE_0__.render; }\n/* harmony export */ });\n/* harmony import */ var _node_modules_babel_loader_lib_index_js_clonedRuleSet_40_use_0_node_modules_vue_loader_dist_templateLoader_js_ruleSet_1_rules_4_node_modules_vue_loader_dist_index_js_ruleSet_0_use_0_playground_vue_vue_type_template_id_1f8a8eb2__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! -!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../../node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!../../../node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./playground.vue?vue&type=template&id=1f8a8eb2 */ \"./node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!./node_modules/vue-loader/dist/templateLoader.js??ruleSet[1].rules[4]!./node_modules/vue-loader/dist/index.js??ruleSet[0].use[0]!./src/views/tmagic/playground.vue?vue&type=template&id=1f8a8eb2\");\n\n\n//# sourceURL=webpack://online-conplier/./src/views/tmagic/playground.vue?");

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/defineProperty.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/defineProperty.js ***!
  \*******************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ _defineProperty; }\n/* harmony export */ });\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\n//# sourceURL=webpack://online-conplier/./node_modules/@babel/runtime/helpers/esm/defineProperty.js?");

/***/ }),

/***/ "./node_modules/@tmagic/core/dist/tmagic-core.mjs":
/*!********************************************************!*\
  !*** ./node_modules/@tmagic/core/dist/tmagic-core.mjs ***!
  \********************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"DEFAULT_EVENTS\": function() { return /* binding */ DEFAULT_EVENTS; },\n/* harmony export */   \"DEFAULT_METHODS\": function() { return /* binding */ DEFAULT_METHODS; },\n/* harmony export */   \"bindCommonEventListener\": function() { return /* binding */ bindCommonEventListener; },\n/* harmony export */   \"default\": function() { return /* binding */ App; },\n/* harmony export */   \"getCommonEventName\": function() { return /* binding */ getCommonEventName; },\n/* harmony export */   \"isCommonMethod\": function() { return /* binding */ isCommonMethod; },\n/* harmony export */   \"triggerCommonMethod\": function() { return /* binding */ triggerCommonMethod; }\n/* harmony export */ });\n/* harmony import */ var D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./node_modules/@babel/runtime/helpers/esm/defineProperty.js */ \"./node_modules/@babel/runtime/helpers/esm/defineProperty.js\");\n/* harmony import */ var core_js_modules_es_error_cause_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.error.cause.js */ \"./node_modules/core-js/modules/es.error.cause.js\");\n/* harmony import */ var core_js_modules_es_array_push_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/es.array.push.js */ \"./node_modules/core-js/modules/es.array.push.js\");\n/* harmony import */ var events__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! events */ \"./node_modules/events/events.js\");\n\n\n\n\n\nclass Env {\n  constructor(ua = globalThis.navigator.userAgent, options = {}) {\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"isIos\", false);\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"isIphone\", false);\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"isIpad\", false);\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"isAndroid\", false);\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"isAndroidPad\", false);\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"isMac\", false);\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"isWin\", false);\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"isMqq\", false);\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"isWechat\", false);\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"isWeb\", false);\n\n    this.isIphone = ua.indexOf(\"iPhone\") >= 0;\n    this.isIpad = /(iPad).*OS\\s([\\d_]+)/.test(ua);\n    this.isIos = this.isIphone || this.isIpad;\n    this.isAndroid = ua.indexOf(\"Android\") >= 0;\n    this.isAndroidPad = this.isAndroid && ua.indexOf(\"Mobile\") < 0;\n    this.isMac = ua.indexOf(\"Macintosh\") >= 0;\n    this.isWin = ua.indexOf(\"Windows\") >= 0;\n    this.isMqq = /QQ\\/([\\d.]+)/.test(ua);\n    this.isWechat = ua.indexOf(\"MicroMessenger\") >= 0 && ua.indexOf(\"wxwork\") < 0;\n    this.isWeb = !this.isIos && !this.isAndroid && !/(WebOS|BlackBerry)/.test(ua);\n    Object.entries(options).forEach(([key, value]) => {\n      this[key] = value;\n    });\n  }\n\n}\n\nconst COMMON_EVENT_PREFIX = \"magic:common:events:\";\nconst COMMON_METHOD_PREFIX = \"magic:common:actions:\";\nconst CommonMethod = {\n  SHOW: \"show\",\n  HIDE: \"hide\",\n  SCROLL_TO_VIEW: \"scrollIntoView\",\n  SCROLL_TO_TOP: \"scrollToTop\"\n};\nconst DEFAULT_EVENTS = [{\n  label: \"\\u70B9\\u51FB\",\n  value: `${COMMON_EVENT_PREFIX}click`\n}];\nconst DEFAULT_METHODS = [];\n\nconst getCommonEventName = commonEventName => {\n  if (commonEventName.startsWith(COMMON_EVENT_PREFIX)) return commonEventName;\n  return `${COMMON_EVENT_PREFIX}${commonEventName}`;\n};\n\nconst isCommonMethod = methodName => methodName.startsWith(COMMON_METHOD_PREFIX);\n\nconst getDirectComponent = (element, app) => {\n  if (!element) {\n    return false;\n  }\n\n  if (!element.id) {\n    return getDirectComponent(element.parentElement, app);\n  }\n\n  const node = app.page?.getNode(element.id);\n\n  if (!node) {\n    return false;\n  }\n\n  return node;\n};\n\nconst commonClickEventHandler = (app, eventName, e) => {\n  const node = getDirectComponent(e.target, app);\n\n  if (node) {\n    app.emit(getCommonEventName(eventName), node);\n  }\n};\n\nconst bindCommonEventListener = app => {\n  window.document.body.addEventListener(\"click\", e => {\n    commonClickEventHandler(app, \"click\", e);\n  });\n  window.document.body.addEventListener(\"click\", e => {\n    commonClickEventHandler(app, \"click:capture\", e);\n  }, true);\n};\n\nconst triggerCommonMethod = (methodName, node) => {\n  const {\n    instance\n  } = node;\n\n  switch (methodName.replace(COMMON_METHOD_PREFIX, \"\")) {\n    case CommonMethod.SHOW:\n      instance.show();\n      break;\n\n    case CommonMethod.HIDE:\n      instance.hide();\n      break;\n\n    case CommonMethod.SCROLL_TO_VIEW:\n      instance.$el.scrollIntoView({\n        behavior: \"smooth\"\n      });\n      break;\n\n    case CommonMethod.SCROLL_TO_TOP:\n      window.scrollTo({\n        top: 0,\n        behavior: \"smooth\"\n      });\n      break;\n  }\n};\n\nclass Store {\n  constructor() {\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"data\", {});\n  }\n\n  set(key, value) {\n    this.data[key] = value;\n  }\n\n  get(key) {\n    return this.data[key];\n  }\n\n}\n\nclass Node extends events__WEBPACK_IMPORTED_MODULE_3__.EventEmitter {\n  constructor(options) {\n    super();\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"data\", void 0);\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"style\", void 0);\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"events\", void 0);\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"instance\", void 0);\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"page\", void 0);\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"parent\", void 0);\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"app\", void 0);\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"store\", new Store());\n\n    this.page = options.page;\n    this.parent = options.parent;\n    this.app = options.app;\n    const {\n      events\n    } = options.config;\n    this.data = options.config;\n    this.events = events;\n    this.listenLifeSafe();\n    this.once(\"destroy\", () => {\n      this.instance = null;\n\n      if (typeof this.data.destroy === \"function\") {\n        this.data.destroy(this);\n      }\n\n      this.listenLifeSafe();\n    });\n  }\n\n  listenLifeSafe() {\n    this.once(\"created\", instance => {\n      this.instance = instance;\n\n      if (typeof this.data.created === \"function\") {\n        this.data.created(this);\n      }\n    });\n    this.once(\"mounted\", instance => {\n      this.instance = instance;\n      const eventConfigQueue = this.app.eventQueueMap[instance.config.id] || [];\n\n      for (let eventConfig = eventConfigQueue.shift(); eventConfig; eventConfig = eventConfigQueue.shift()) {\n        this.app.eventHandler(eventConfig.eventConfig, eventConfig.fromCpt, eventConfig.args);\n      }\n\n      if (typeof this.data.mounted === \"function\") {\n        this.data.mounted(this);\n      }\n    });\n  }\n\n}\n\nclass Page extends Node {\n  constructor(options) {\n    super(options);\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"nodes\", /* @__PURE__ */new Map());\n\n    this.setNode(options.config.id, this);\n    this.initNode(options.config, this);\n  }\n\n  initNode(config, parent) {\n    const node = new Node({\n      config,\n      parent,\n      page: this,\n      app: this.app\n    });\n    this.setNode(config.id, node);\n    config.items?.forEach(element => {\n      this.initNode(element, node);\n    });\n  }\n\n  getNode(id) {\n    return this.nodes.get(id);\n  }\n\n  setNode(id, node) {\n    this.nodes.set(id, node);\n  }\n\n  deleteNode(id) {\n    this.nodes.delete(id);\n  }\n\n}\n\nconst style2Obj = style => {\n  if (typeof style !== \"string\") {\n    return style;\n  }\n\n  const obj = {};\n  style.split(\";\").forEach(element => {\n    if (!element) {\n      return;\n    }\n\n    const items = element.split(\":\");\n    let key = items.shift();\n    let value = items.join(\":\");\n    if (!key) return;\n    key = key.replace(/^\\s*/, \"\").replace(/\\s*$/, \"\");\n    value = value.replace(/^\\s*/, \"\").replace(/\\s*$/, \"\");\n    key = key.split(\"-\").map((v, i) => i > 0 ? `${v[0].toUpperCase()}${v.substr(1)}` : v).join(\"\");\n    obj[key] = value;\n  });\n  return obj;\n};\n\nconst fillBackgroundImage = value => {\n  if (value && !/^url/.test(value) && !/^linear-gradient/.test(value)) {\n    return `url(${value})`;\n  }\n\n  return value;\n};\n\nconst isNumber = value => /^(-?\\d+)(\\.\\d+)?$/.test(value);\n\nclass App extends events__WEBPACK_IMPORTED_MODULE_3__.EventEmitter {\n  constructor(options) {\n    super();\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"env\", void 0);\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"pages\", /* @__PURE__ */new Map());\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"page\", void 0);\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"platform\", \"mobile\");\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"jsEngine\", \"browser\");\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"designWidth\", 375);\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"components\", /* @__PURE__ */new Map());\n\n    (0,D_Code_vue_onlie_editor_node_modules_babel_runtime_helpers_esm_defineProperty_js__WEBPACK_IMPORTED_MODULE_0__[\"default\"])(this, \"eventQueueMap\", {});\n\n    this.env = new Env(options.ua);\n    options.platform && (this.platform = options.platform);\n    options.jsEngine && (this.jsEngine = options.jsEngine);\n    options.designWidth && (this.designWidth = options.designWidth);\n\n    if (this.platform === \"mobile\" || this.platform === \"editor\") {\n      const calcFontsize = () => {\n        let {\n          width\n        } = document.documentElement.getBoundingClientRect();\n        width = Math.min(800, width);\n        const fontSize = width / (this.designWidth / 100);\n        document.documentElement.style.fontSize = `${fontSize}px`;\n      };\n\n      calcFontsize();\n      document.body.style.fontSize = \"14px\";\n      globalThis.addEventListener(\"resize\", calcFontsize);\n    }\n\n    if (options.transformStyle) {\n      this.transformStyle = options.transformStyle;\n    }\n\n    options.config && this.setConfig(options.config, options.curPage);\n    bindCommonEventListener(this);\n  }\n\n  transformStyle(style) {\n    if (!style) {\n      return {};\n    }\n\n    let styleObj = {};\n    const results = {};\n\n    if (typeof style === \"string\") {\n      styleObj = style2Obj(style);\n    } else {\n      styleObj = { ...style\n      };\n    }\n\n    const whiteList = [\"zIndex\", \"opacity\", \"fontWeight\"];\n    Object.entries(styleObj).forEach(([key, value]) => {\n      if (key === \"backgroundImage\") {\n        value && (results[key] = fillBackgroundImage(value));\n      } else if (key === \"transform\" && typeof value !== \"string\") {\n        const values = Object.entries(value).map(([transformKey, transformValue]) => {\n          if (!transformValue.trim()) return \"\";\n\n          if (transformKey === \"rotate\" && isNumber(transformValue)) {\n            transformValue = `${transformValue}deg`;\n          }\n\n          return `${transformKey}(${transformValue})`;\n        }).join(\" \");\n        results[key] = !values.trim() ? \"none\" : values;\n      } else if (!whiteList.includes(key) && value && /^[-]?[0-9]*[.]?[0-9]*$/.test(value)) {\n        results[key] = `${value / 100}rem`;\n      } else {\n        results[key] = value;\n      }\n    });\n    return results;\n  }\n\n  setConfig(config, curPage) {\n    this.pages = /* @__PURE__ */new Map();\n    config.items?.forEach(page => {\n      this.pages.set(page.id, new Page({\n        config: page,\n        app: this\n      }));\n    });\n    this.setPage(curPage || this.page?.data?.id);\n  }\n\n  setPage(id) {\n    let page;\n\n    if (id) {\n      page = this.pages.get(id);\n    }\n\n    if (!page) {\n      page = this.pages.get(this.pages.keys().next().value);\n    }\n\n    this.page = page;\n\n    if (this.platform !== \"magic\") {\n      this.bindEvents();\n    }\n  }\n\n  registerComponent(type, Component) {\n    this.components.set(type, Component);\n  }\n\n  unregisterComponent(type) {\n    this.components.delete(type);\n  }\n\n  resolveComponent(type) {\n    return this.components.get(type);\n  }\n\n  bindEvents() {\n    if (!this.page) return;\n    this.removeAllListeners();\n\n    for (const [, value] of this.page.nodes) {\n      value.events?.forEach(event => this.bindEvent(event, `${value.data.id}`));\n    }\n  }\n\n  bindEvent(event, id) {\n    const {\n      name\n    } = event;\n    this.on(`${name}_${id}`, (fromCpt, ...args) => {\n      this.eventHandler(event, fromCpt, args);\n    });\n  }\n\n  emit(name, node, ...args) {\n    if (node?.data?.id) {\n      return super.emit(`${String(name)}_${node.data.id}`, node, ...args);\n    }\n\n    return super.emit(name, node, ...args);\n  }\n\n  eventHandler(eventConfig, fromCpt, args) {\n    if (!this.page) throw new Error(\"\\u5F53\\u524D\\u6CA1\\u6709\\u9875\\u9762\");\n    const {\n      method: methodName,\n      to\n    } = eventConfig;\n    const toNode = this.page.getNode(to);\n    if (!toNode) throw `ID\\u4E3A${to}\\u7684\\u7EC4\\u4EF6\\u4E0D\\u5B58\\u5728`;\n\n    if (isCommonMethod(methodName)) {\n      return triggerCommonMethod(methodName, toNode);\n    }\n\n    if (toNode.instance) {\n      if (typeof toNode.instance[methodName] === \"function\") {\n        toNode.instance[methodName](fromCpt, ...args);\n      }\n    } else {\n      this.addEventToMap({\n        eventConfig,\n        fromCpt,\n        args\n      });\n    }\n  }\n\n  destroy() {\n    this.removeAllListeners();\n    this.pages.clear();\n  }\n\n  addEventToMap(event) {\n    if (this.eventQueueMap[event.eventConfig.to]) {\n      this.eventQueueMap[event.eventConfig.to].push(event);\n    } else {\n      this.eventQueueMap[event.eventConfig.to] = [event];\n    }\n  }\n\n}\n\nconst resetcss = '';\n\n\n//# sourceURL=webpack://online-conplier/./node_modules/@tmagic/core/dist/tmagic-core.mjs?");

/***/ })

}]);