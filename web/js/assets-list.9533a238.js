"use strict";(self["webpackChunkonline_conplier"]=self["webpackChunkonline_conplier"]||[]).push([[7405],{53920:function(e,t,n){n(27515)},6566:function(e,t,n){n(27515),n(26),n(81830)},24348:function(e,t,n){n(27515),n(24535)},1350:function(e,t,n){n(27515)},14657:function(e,t,n){n(27515),n(13680)},64339:function(e,t,n){n(27515),n(24535)},13680:function(e,t,n){n(27515),n(53920)},79313:function(e,t,n){n(27515),n(24535),n(53920),n(8710),n(16938),n(79643),n(14657),n(81830),n(24348)},50954:function(e,t,n){n(27515),n(24535),n(81830)},20511:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});n(79313);var a=n(36306),l=(n(50954),n(77838)),r=(n(24348),n(68626)),o=(n(6566),n(43517)),c=(n(64339),n(48856)),i=(n(24535),n(74246)),u=(n(27515),n(14909)),d=(n(1350),n(10252)),f=n(10311),s=n(28934),m={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.7L639.4 73.4c-6-6-14.2-9.4-22.7-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.6-9.4-22.6zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM402 549c0 5.4 4.4 9.5 9.8 9.5h32.4c5.4 0 9.8-4.2 9.8-9.4 0-28.2 25.8-51.6 58-51.6s58 23.4 58 51.5c0 25.3-21 47.2-49.3 50.9-19.3 2.8-34.5 20.3-34.7 40.1v32c0 5.5 4.5 10 10 10h32c5.5 0 10-4.5 10-10v-12.2c0-6 4-11.5 9.7-13.3 44.6-14.4 75-54 74.3-98.9-.8-55.5-49.2-100.8-108.5-101.6-61.4-.7-111.5 45.6-111.5 103zm78 195a32 32 0 1064 0 32 32 0 10-64 0z"}}]},name:"file-unknown",theme:"outlined"},p=m,v=n(72532);function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){w(e,t,n[t])}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e,t){var n=h({},e,t.attrs);return(0,f.createVNode)(v.Z,h({},n,{icon:p}),null)};N.displayName="FileUnknownOutlined",N.inheritAttrs=!1;var y=N,V=n(95010);async function x(e){const t=await(0,V.pp)(e);return t}async function C(e){const t=await(0,V.s3)();await t.delete(e)}var g=n(55743),b=n.n(g),k=n(15941);const P={class:"filter-wrap"},Z=(0,f.createTextVNode)("搜索"),_=(0,f.createTextVNode)("重置"),O=(0,f.createTextVNode)("上传"),M={class:"table-wrap"};var j={__name:"index",setup(e){const t=(0,f.ref)(!1),n=(0,f.ref)([]),m=(0,f.ref)(n.value),p=()=>{m.value=n.value.filter((e=>e.name.indexOf(g.name)>-1&&e.type.indexOf(g.type)-1))},v=()=>{g.name="",g.type="",m.value=n.value},h="test/assets/",w=async()=>{const e=await x(h);k.log(e),n.value=e.objects.map((e=>({...e,fileName:e.name.replace(h,""),lastModified:b()(e.lastModified).format("YYYY-MM-DD HH:mm:ss")}))),p()},N=async e=>{await C(e),w(),d.ZP.success({content:"删除成功",duration:3})},g=(0,f.reactive)({name:"",key:""}),j=(0,f.ref)([{title:"名称",dataIndex:"fileName",key:"fileName"},{title:"url",dataIndex:"url",key:"url",ellipsis:!0},{title:"预览",key:"preview",customRender:({record:e})=>/\.(jpg|jpeg|png|GIF|JPG|PNG)$/.test(e.fileName)?(0,f.createVNode)("div",{class:"image-wrap"},[(0,f.createVNode)(u.ZP,{width:50,height:50,src:e.url},null)]):(0,f.createVNode)(y,{style:{fontSize:"50px",color:"#CCCCCC"}},null)},{title:"最后更新时间",dataIndex:"lastModified",key:"lastModified"},{title:"操作",dataIndex:"action",customRender:({record:e})=>(0,f.createVNode)(f.Fragment,null,[(0,f.createVNode)(c.Z,{title:"确认删除此资源？",okText:"确认",cancelText:"取消",onConfirm:()=>N(e.name)},{default:()=>[(0,f.createVNode)(i.Z,{size:"small",type:"link",onClick:()=>k.log(e)},{default:()=>[(0,f.createTextVNode)("删除")]})]})])}]),z=({onError:e,onSuccess:n,file:a})=>{t.value=!0,(0,V.gz)(`${h}${a.name}`,a).then((()=>{n(),w(),t.value=!1})).catch((()=>{e()}))};return(0,f.onMounted)((()=>{w()})),(e,n)=>((0,f.openBlock)(),(0,f.createBlock)((0,f.unref)(s.PageContainer),null,{default:(0,f.withCtx)((()=>[(0,f.createElementVNode)("div",P,[(0,f.createVNode)((0,f.unref)(o.ZP),{layout:"inline",model:g},{default:(0,f.withCtx)((()=>[(0,f.createVNode)((0,f.unref)(o.ZP).Item,{label:"资源名称",name:"name"},{default:(0,f.withCtx)((()=>[(0,f.createVNode)((0,f.unref)(r.ZP),{value:g.name,"onUpdate:value":n[0]||(n[0]=e=>g.name=e)},null,8,["value"])])),_:1}),(0,f.createVNode)((0,f.unref)(o.ZP).Item,null,{default:(0,f.withCtx)((()=>[(0,f.createVNode)((0,f.unref)(i.Z),{type:"primary",onClick:p},{default:(0,f.withCtx)((()=>[Z])),_:1})])),_:1}),(0,f.createVNode)((0,f.unref)(o.ZP).Item,null,{default:(0,f.withCtx)((()=>[(0,f.createVNode)((0,f.unref)(i.Z),{onClick:v},{default:(0,f.withCtx)((()=>[_])),_:1})])),_:1}),(0,f.createVNode)((0,f.unref)(o.ZP).Item,null,{default:(0,f.withCtx)((()=>[(0,f.createVNode)((0,f.unref)(l.Z),{customRequest:z,showUploadList:!1},{default:(0,f.withCtx)((()=>[(0,f.createVNode)((0,f.unref)(i.Z),{type:"primary",ghost:"",loading:t.value},{default:(0,f.withCtx)((()=>[O])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1},8,["model"])]),(0,f.createElementVNode)("div",M,[(0,f.createVNode)((0,f.unref)(a.ZP),{class:"table",dataSource:m.value,columns:j.value,size:"middle"},null,8,["dataSource","columns"])])])),_:1}))}};const z=j;var I=z}}]);