(self["webpackChunkonline_conplier"]=self["webpackChunkonline_conplier"]||[]).push([[9537],{25787:function(e,o,n){var t=n(47976),l=TypeError;e.exports=function(e,o){if(t(o,e))return e;throw l("Incorrect invocation")}},93678:function(e){e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},82801:function(e,o,n){"use strict";var t=n(82109),l=n(17854),a=n(35005),r=n(79114),i=n(3070).f,c=n(92597),d=n(25787),m=n(79587),s=n(56277),p=n(93678),u=n(77741),f=n(19781),g=n(31913),h="DOMException",v=a("Error"),y=a(h),b=function(){d(this,k);var e=arguments.length,o=s(e<1?void 0:arguments[0]),n=s(e<2?void 0:arguments[1],"Error"),t=new y(o,n),l=v(o);return l.name=h,i(t,"stack",r(1,u(l.stack,1))),m(t,this,b),t},k=b.prototype=y.prototype,C="stack"in v(h),x="stack"in new y(1,2),V=y&&f&&Object.getOwnPropertyDescriptor(l,h),B=!!V&&!(V.writable&&V.configurable),w=C&&!B&&!x;t({global:!0,constructor:!0,forced:g||w},{DOMException:w?b:y});var _=a(h),E=_.prototype;if(E.constructor!==_)for(var z in g||i(E,"constructor",r(1,_)),p)if(c(p,z)){var N=p[z],S=N.s;c(_,S)||i(_,S,r(6,N.c))}},60679:function(e,o,n){"use strict";var t=n(10311),l=(0,t.defineComponent)({name:"ArrowDown"});const a={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},r=(0,t.createVNode)("path",{fill:"currentColor",d:"M831.872 340.864 512 652.672 192.128 340.864a30.592 30.592 0 0 0-42.752 0 29.12 29.12 0 0 0 0 41.6L489.664 714.24a32 32 0 0 0 44.672 0l340.288-331.712a29.12 29.12 0 0 0 0-41.728 30.592 30.592 0 0 0-42.752 0z"},null,-1);function i(e,o,n,l,i,c){return(0,t.openBlock)(),(0,t.createBlock)("svg",a,[r])}l.render=i,l.__file="packages/components/ArrowDown.vue",o["Z"]=l},58778:function(e,o,n){"use strict";var t=n(10311),l=(0,t.defineComponent)({name:"CaretBottom"});const a={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},r=(0,t.createVNode)("path",{fill:"currentColor",d:"m192 384 320 384 320-384z"},null,-1);function i(e,o,n,l,i,c){return(0,t.openBlock)(),(0,t.createBlock)("svg",a,[r])}l.render=i,l.__file="packages/components/CaretBottom.vue",o["Z"]=l},41355:function(e,o,n){"use strict";var t=n(10311),l=(0,t.defineComponent)({name:"Delete"});const a={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},r=(0,t.createVNode)("path",{fill:"currentColor",d:"M160 256H96a32 32 0 0 1 0-64h256V95.936a32 32 0 0 1 32-32h256a32 32 0 0 1 32 32V192h256a32 32 0 1 1 0 64h-64v672a32 32 0 0 1-32 32H192a32 32 0 0 1-32-32V256zm448-64v-64H416v64h192zM224 896h576V256H224v640zm192-128a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32zm192 0a32 32 0 0 1-32-32V416a32 32 0 0 1 64 0v320a32 32 0 0 1-32 32z"},null,-1);function i(e,o,n,l,i,c){return(0,t.openBlock)(),(0,t.createBlock)("svg",a,[r])}l.render=i,l.__file="packages/components/Delete.vue",o["Z"]=l},65232:function(e,o,n){"use strict";var t=n(10311),l=(0,t.defineComponent)({name:"Grid"});const a={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},r=(0,t.createVNode)("path",{fill:"currentColor",d:"M640 384v256H384V384h256zm64 0h192v256H704V384zm-64 512H384V704h256v192zm64 0V704h192v192H704zm-64-768v192H384V128h256zm64 0h192v192H704V128zM320 384v256H128V384h192zm0 512H128V704h192v192zm0-768v192H128V128h192z"},null,-1);function i(e,o,n,l,i,c){return(0,t.openBlock)(),(0,t.createBlock)("svg",a,[r])}l.render=i,l.__file="packages/components/Grid.vue",o["Z"]=l},92812:function(e,o,n){"use strict";n.r(o),n.d(o,{MCascader:function(){return ko},MCheckbox:function(){return Vo},MCheckboxGroup:function(){return _o},MColorPicker:function(){return No},MContainer:function(){return ee},MDate:function(){return To},MDateTime:function(){return Oo},MDaterange:function(){return jo},MDisplay:function(){return Io},MDynamicField:function(){return qo},MFieldset:function(){return de},MForm:function(){return zn},MFormDialog:function(){return jn},MGroupList:function(){return _e},MHidden:function(){return Uo},MLink:function(){return Jo},MNumber:function(){return nn},MPanel:function(){return Ae},MRadioGroup:function(){return an},MRow:function(){return De},MSelect:function(){return pn},MSwitch:function(){return gn},MTable:function(){return lo},MTabs:function(){return so},MText:function(){return bn},MTextarea:function(){return xn},MTime:function(){return wn},default:function(){return On},display:function(){return W},fieldProps:function(){return go},filterFunction:function(){return $},getRules:function(){return Z},initValue:function(){return q},useAddField:function(){return ho}});n(26699),n(21703);var t=n(10311),l=(0,t.defineComponent)({name:"WarningFilled"});const a={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},r=(0,t.createVNode)("path",{fill:"currentColor",d:"M512 64a448 448 0 1 1 0 896 448 448 0 0 1 0-896zm0 192a58.432 58.432 0 0 0-58.24 63.744l23.36 256.384a35.072 35.072 0 0 0 69.76 0l23.296-256.384A58.432 58.432 0 0 0 512 256zm0 512a51.2 51.2 0 1 0 0-102.4 51.2 51.2 0 0 0 0 102.4z"},null,-1);function i(e,o,n,l,i,c){return(0,t.openBlock)(),(0,t.createBlock)("svg",a,[r])}l.render=i,l.__file="packages/components/WarningFilled.vue";var c=l,d=(0,t.defineComponent)({name:"CaretRight"});const m={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},s=(0,t.createVNode)("path",{fill:"currentColor",d:"M384 192v640l384-320.064z"},null,-1);function p(e,o,n,l,a,r){return(0,t.openBlock)(),(0,t.createBlock)("svg",m,[s])}d.render=p,d.__file="packages/components/CaretRight.vue";var u=d,f=n(58778),g=n(41355),h=n(60679),v=(0,t.defineComponent)({name:"ArrowUp"});const y={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},b=(0,t.createVNode)("path",{fill:"currentColor",d:"m488.832 344.32-339.84 356.672a32 32 0 0 0 0 44.16l.384.384a29.44 29.44 0 0 0 42.688 0l320-335.872 319.872 335.872a29.44 29.44 0 0 0 42.688 0l.384-.384a32 32 0 0 0 0-44.16L535.168 344.32a32 32 0 0 0-46.336 0z"},null,-1);function k(e,o,n,l,a,r){return(0,t.openBlock)(),(0,t.createBlock)("svg",y,[b])}v.render=k,v.__file="packages/components/ArrowUp.vue";var C=v,x=(0,t.defineComponent)({name:"FullScreen"});const V={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1024 1024"},B=(0,t.createVNode)("path",{fill:"currentColor",d:"m160 96.064 192 .192a32 32 0 0 1 0 64l-192-.192V352a32 32 0 0 1-64 0V96h64v.064zm0 831.872V928H96V672a32 32 0 1 1 64 0v191.936l192-.192a32 32 0 1 1 0 64l-192 .192zM864 96.064V96h64v256a32 32 0 1 1-64 0V160.064l-192 .192a32 32 0 1 1 0-64l192-.192zm0 831.872-192-.192a32 32 0 0 1 0-64l192 .192V672a32 32 0 1 1 64 0v256h-64v-.064z"},null,-1);function w(e,o,n,l,a,r){return(0,t.openBlock)(),(0,t.createBlock)("svg",V,[B])}x.render=w,x.__file="packages/components/FullScreen.vue";var _=x,E=n(65232),z=n(26468),N=n(64205),S=n(97735),H=n(3413),T=n(99954),M=n(15941);const A=e=>"string"===typeof e&&["table-select","tableSelect"].includes(e),j=(e,o,{asyncLoad:n,name:t,type:l})=>{"html"===l&&"object"===typeof n&&"undefined"!==typeof t&&(n.name=t,e.asyncLoad="object"===typeof o.asyncLoad?o.asyncLoad:n)},F=e=>"string"===typeof e&&["checkbox-group","checkboxGroup","table","cascader","group-list","groupList"].includes(e),L=(e,o,n,{items:t,name:l,extensible:a})=>{Array.isArray(n[l])?o[l]=n[l].map(((n,a)=>D(e,t,n,o[l]?.[a]))):(o[l]=D(e,t,n[l],o[l]),a&&(o[l]=Object.assign({},n[l],o[l])))},O=(e,o,n,t)=>{const{items:l,name:a,type:r,checkbox:i}=t;(F(r)||"tab"===r&&t.dynamic)&&(o[a]=n[a]||[]),l?L(e,o,n,t):o[a]=I(e,t),"fieldset"===r&&i&&"object"===typeof o[a]&&(o[a].value="object"===typeof n[a]&&n[a].value||0)},R=function(e,o,n,t){const{items:l}=o,{names:a}=o,{type:r,name:i}=o;return A(r)&&i?(t[i]=n[i]||"",t):(j(t,n,o),i&&!l&&"undefined"!==typeof n[i]?("undefined"===typeof t[i]&&(t[i]="number"===r?Number(n[i]):"object"===typeof n[i]?(0,z.Z)(n[i]):n[i]),t):a?a.forEach((e=>t[e]=n[e]||"")):i?(O(e,t,n,o),t):D(e,l,n,t))},D=function(e,o=[],n={},t={}){return Array.isArray(o)&&o.forEach((o=>{R(e,o,n,t)})),t},I=function(e,{defaultValue:o,type:n,filter:t,multiple:l}){return"function"===typeof o?o(e):"undefined"!==o?"undefined"!==typeof o?o:"number"===n||"number"===t?0:!["switch","checkbox"].includes(n)&&(l?[]:""):void 0},$=(e,o,n)=>"function"!==typeof o?o:o(e,{values:e?.initValues||{},model:n.model,parent:e?.parentValues||{},formValue:e?.values||n.model,prop:n.prop,config:n.config}),W=function(e,o,n){return"function"===typeof o?$(e,o,n):!1!==o},Z=function(e,o=[],n){return o=(0,z.Z)(o),"object"!==typeof o||Array.isArray(o)||(o=[o]),o.map((o=>{if("function"===typeof o.validator){const t=o.validator;o.validator=(o,l,a,r,i)=>t({rule:o,value:n.config.names?n.model:l,callback:a,source:r,options:i},{values:e?.initValues||{},model:n.model,parent:e?.parentValues||{},formValue:e?.values||n.model,prop:n.prop,config:n.config},e)}return o}))},q=async(e,{initValues:o,config:n})=>{if(!Array.isArray(n))throw new Error("config应该为数组");let l=D(e,n,(0,t.toRaw)(o),{});const[a]=n;return a&&"function"===typeof a.onInitValue&&(l=await a.onInitValue(e,{formValue:l,initValue:o})),l||{}};var P=(e,o)=>{const n=e.__vccOpts||e;for(const[t,l]of o)n[t]=l;return n};const U=(0,t.defineComponent)({name:"m-form-container",components:{WarningFilled:c},props:{labelWidth:String,expandMore:Boolean,model:{type:[Object,Array],required:!0},config:{type:Object,required:!0},prop:{type:String,default:()=>""},stepActive:{type:[String,Number]},size:{type:String,default:"small"}},emits:["change"],setup(e,{emit:o}){const n=(0,t.inject)("mForm"),l=(0,t.ref)(!1),a=(0,t.computed)((()=>e.config.name||"")),r=(0,t.computed)((()=>e.config.items)),i=(0,t.computed)((()=>{let o="";const{names:n}=e.config;if(n?.[0])[o]=n;else{if(!a.value)return e.prop;o=a.value}return`${e.prop}${e.prop?".":""}${o}`})),c=(0,t.computed)((()=>{const e=(0,t.resolveComponent)(`m-${r.value?"form":"fields"}-${u.value}`);return"string"!==typeof e?e:"m-fields-text"})),d=(0,t.computed)((()=>$(n,e.config.disabled,e))),m=(0,t.computed)((()=>$(n,e.config.tooltip,e))),s=(0,t.computed)((()=>$(n,e.config.extra,e))),p=(0,t.computed)((()=>Z(n,e.config.rules,e))),u=(0,t.computed)((()=>{let{type:o}=e.config;return"function"===typeof o&&(o=o(n,{model:e.model})),"form"===o?"":o?.replace(/([A-Z])/g,"-$1").toLowerCase()||(r.value?"":"text")})),f=(0,t.computed)((()=>"expand"===e.config.display?l.value:W(n,e.config.display,e))),g=(0,t.computed)((()=>e.config.labelWidth||e.labelWidth));(0,t.watchEffect)((()=>{l.value=e.expandMore}));const h=()=>l.value=!l.value,v=e=>e[n?.keyProps],y=(o,t)=>"function"===typeof o?o(n,t,{model:e.model,values:n?.initValues,formValue:n?.values,prop:i.value,config:e.config}):"number"===o?+t:t,b=(o,t)=>{if("function"===typeof o)return o(n,t,{model:e.model,values:n?.initValues,formValue:n?.values,prop:i.value,config:e.config})},k=(e,o)=>{if("string"===typeof o&&e)return o.replace(/^\s*/,"").replace(/\s*$/,"")},C=async function(n,t){const{filter:l,onChange:a,trim:r,name:i,dynamicKey:c}=e.config;let d=n;try{d=y(l,n),d=await b(a,d)??d,d=k(r,d)??d}catch(m){M.error(m)}!i&&0!==i||e.model===d||n===d&&e.model[i]===d||(e.model[i]=d),void 0!==t&&c&&(e.model[t]=d),o("change",e.model)};return{expand:l,name:a,type:u,disabled:d,itemProp:i,items:r,display:f,itemLabelWidth:g,tagName:c,rule:p,tooltip:m,extra:s,key:v,onChangeHandler:C,expandHandler:h}}}),K=["innerHTML"],Y=["innerHTML"],G=["innerHTML"],X=["innerHTML"],Q={key:4,style:{"text-align":"center"}};function J(e,o,n,l,a,r){const i=(0,t.resolveComponent)("m-fields-hidden"),c=(0,t.resolveComponent)("el-tooltip"),d=(0,t.resolveComponent)("el-form-item"),m=(0,t.resolveComponent)("warning-filled"),s=(0,t.resolveComponent)("el-icon"),p=(0,t.resolveComponent)("m-form-container"),u=(0,t.resolveComponent)("el-button");return e.config?((0,t.openBlock)(),(0,t.createElementBlock)("div",{key:0,style:(0,t.normalizeStyle)(e.config.tip?"display: flex;align-items: baseline;":""),class:(0,t.normalizeClass)([e.config.className,"m-form-container"])},["hidden"===e.type?((0,t.openBlock)(),(0,t.createBlock)(i,{key:0,model:e.model,config:e.config,name:e.config.name,disabled:e.disabled,prop:e.itemProp},null,8,["model","config","name","disabled","prop"])):e.items&&!e.config.text&&e.type&&e.display?((0,t.openBlock)(),(0,t.createBlock)((0,t.resolveDynamicComponent)(e.tagName),{key:e.key(e.config),size:e.size,model:e.model,config:e.config,name:e.name,prop:e.itemProp,"step-active":e.stepActive,"expand-more":e.expand,"label-width":e.itemLabelWidth,onChange:e.onChangeHandler},null,40,["size","model","config","name","prop","step-active","expand-more","label-width","onChange"])):e.type&&e.display?((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,{key:2},[(0,t.createVNode)(d,{style:(0,t.normalizeStyle)(e.config.tip?"flex: 1":""),class:(0,t.normalizeClass)({hidden:"0"===`${e.itemLabelWidth}`||!e.config.text}),prop:e.itemProp,"label-width":e.itemLabelWidth,rules:e.rule},{label:(0,t.withCtx)((()=>[(0,t.createElementVNode)("span",{innerHTML:"checkbox"===e.type?"":e.config.text},null,8,K)])),default:(0,t.withCtx)((()=>[e.tooltip?((0,t.openBlock)(),(0,t.createBlock)(c,{key:0},{content:(0,t.withCtx)((()=>[(0,t.createElementVNode)("div",{innerHTML:e.tooltip},null,8,Y)])),default:(0,t.withCtx)((()=>[((0,t.openBlock)(),(0,t.createBlock)((0,t.resolveDynamicComponent)(e.tagName),{key:e.key(e.config),size:e.size,model:e.model,config:e.config,name:e.name,disabled:e.disabled,prop:e.itemProp,onChange:e.onChangeHandler},null,40,["size","model","config","name","disabled","prop","onChange"]))])),_:1})):((0,t.openBlock)(),(0,t.createBlock)((0,t.resolveDynamicComponent)(e.tagName),{key:e.key(e.config),size:e.size,model:e.model,config:e.config,name:e.name,disabled:e.disabled,prop:e.itemProp,onChange:e.onChangeHandler},null,40,["size","model","config","name","disabled","prop","onChange"])),e.extra?((0,t.openBlock)(),(0,t.createElementBlock)("div",{key:2,innerHTML:e.extra,class:"m-form-tip"},null,8,G)):(0,t.createCommentVNode)("",!0)])),_:1},8,["style","class","prop","label-width","rules"]),e.config.tip?((0,t.openBlock)(),(0,t.createBlock)(c,{key:0,placement:"left"},{content:(0,t.withCtx)((()=>[(0,t.createElementVNode)("div",{innerHTML:e.config.tip},null,8,X)])),default:(0,t.withCtx)((()=>[(0,t.createVNode)(s,{style:{"line-height":"40px","margin-left":"5px"}},{default:(0,t.withCtx)((()=>[(0,t.createVNode)(m)])),_:1})])),_:1})):(0,t.createCommentVNode)("",!0)],64)):e.items&&e.display?((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,{key:3},[(e.name||0===e.name?e.model[e.name]:e.model)?((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,{key:0},(0,t.renderList)(e.items,(o=>((0,t.openBlock)(),(0,t.createBlock)(p,{key:e.key(o),model:e.name||0===e.name?e.model[e.name]:e.model,config:o,size:e.size,"step-active":e.stepActive,"expand-more":e.expand,"label-width":e.itemLabelWidth,prop:e.itemProp,onChange:e.onChangeHandler},null,8,["model","config","size","step-active","expand-more","label-width","prop","onChange"])))),128)):(0,t.createCommentVNode)("",!0)],64)):(0,t.createCommentVNode)("",!0),e.config.expand&&"fieldset"!==e.type?((0,t.openBlock)(),(0,t.createElementBlock)("div",Q,[(0,t.createVNode)(u,{text:"",onClick:e.expandHandler},{default:(0,t.withCtx)((()=>[(0,t.createTextVNode)((0,t.toDisplayString)(e.expand?"收起配置":"展开更多配置"),1)])),_:1},8,["onClick"])])):(0,t.createCommentVNode)("",!0)],6)):(0,t.createCommentVNode)("",!0)}var ee=P(U,[["render",J]]);const oe=["innerHTML"],ne=["innerHTML"],te={key:1},le=["innerHTML"],ae=["innerHTML"],re={key:2,style:{display:"flex"}},ie={style:{flex:"1"}},ce=["src"],de=(0,t.defineComponent)({__name:"Fieldset",props:{labelWidth:null,prop:{default:""},size:null,model:null,config:null,rules:{default:{}}},emits:["change"],setup(e,{emit:o}){const n=e,l=(0,t.inject)("mForm"),a=(0,t.computed)((()=>n.config.name||"")),r=(0,t.computed)((()=>!n.config.expand||!a.value||n.model[a.value]?.value)),i=(0,t.computed)((()=>n.config.items?n.config.labelWidth||n.labelWidth:n.config.labelWidth||n.labelWidth||(n.config.text?null:"0"))),c=()=>{o("change",n.model)},d=(e,o)=>e[l?.keyProp||"__key"]??o;return n.config.checkbox&&a.value&&(0,t.watch)((()=>n.model[a.value]?.value),(()=>{o("change",n.model)})),(o,n)=>{const l=(0,t.resolveComponent)("el-checkbox"),m=(0,t.resolveComponent)("m-form-container");return((0,t.unref)(a)?e.model[(0,t.unref)(a)]:e.model)?((0,t.openBlock)(),(0,t.createElementBlock)("fieldset",{key:0,class:"m-fieldset",style:(0,t.normalizeStyle)((0,t.unref)(r)?"padding: 15px 15px 0 5px;":"border: 0")},[(0,t.unref)(a)&&e.config.checkbox?((0,t.openBlock)(),(0,t.createBlock)((0,t.resolveDynamicComponent)((0,t.unref)(r)?"legend":"div"),{key:0},{default:(0,t.withCtx)((()=>[(0,t.createVNode)(l,{modelValue:e.model[(0,t.unref)(a)].value,"onUpdate:modelValue":n[0]||(n[0]=o=>e.model[(0,t.unref)(a)].value=o),prop:`${e.prop}${e.prop?".":""}${e.config.name}.value`,"true-label":1,"false-label":0},{default:(0,t.withCtx)((()=>[(0,t.createElementVNode)("span",{innerHTML:e.config.legend},null,8,oe),e.config.extra?((0,t.openBlock)(),(0,t.createElementBlock)("span",{key:0,innerHTML:e.config.extra,class:"m-form-tip"},null,8,ne)):(0,t.createCommentVNode)("",!0)])),_:1},8,["modelValue","prop"])])),_:1})):((0,t.openBlock)(),(0,t.createElementBlock)("legend",te,[(0,t.createElementVNode)("span",{innerHTML:e.config.legend},null,8,le),e.config.extra?((0,t.openBlock)(),(0,t.createElementBlock)("span",{key:0,innerHTML:e.config.extra,class:"m-form-tip"},null,8,ae)):(0,t.createCommentVNode)("",!0)])),e.config.schematic&&(0,t.unref)(r)?((0,t.openBlock)(),(0,t.createElementBlock)("div",re,[(0,t.createElementVNode)("div",ie,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.config.items,((o,n)=>((0,t.openBlock)(),(0,t.createBlock)(m,{key:d(o,n),model:(0,t.unref)(a)?e.model[(0,t.unref)(a)]:e.model,rules:(0,t.unref)(a)?e.rules[(0,t.unref)(a)]:[],config:o,prop:e.prop,labelWidth:(0,t.unref)(i),size:e.size,onChange:c},null,8,["model","rules","config","prop","labelWidth","size"])))),128))]),(0,t.createElementVNode)("img",{class:"m-form-schematic",src:e.config.schematic},null,8,ce)])):(0,t.unref)(r)?((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,{key:3},(0,t.renderList)(e.config.items,((o,n)=>((0,t.openBlock)(),(0,t.createBlock)(m,{key:d(o,n),model:(0,t.unref)(a)?e.model[(0,t.unref)(a)]:e.model,rules:(0,t.unref)(a)?e.rules[(0,t.unref)(a)]:[],config:o,prop:e.prop,labelWidth:(0,t.unref)(i),size:e.size,onChange:c},null,8,["model","rules","config","prop","labelWidth","size"])))),128)):(0,t.createCommentVNode)("",!0)],4)):(0,t.createCommentVNode)("",!0)}}}),me=(0,t.defineComponent)({name:"m-form-group-list-item",components:{CaretRight:u,CaretBottom:f.Z},props:{labelWidth:String,model:{type:Object,default:()=>({})},config:{type:Object,default:()=>({})},prop:String,size:String,index:{type:[Number,String,Symbol],default:0},groupModel:{type:Array,default:()=>[]}},emits:["swap-item","remove-item","change"],setup(e,{emit:o}){const n=(0,t.inject)("mForm"),l=(0,t.ref)(!1);(0,t.watchEffect)((()=>{l.value=!e.index}));const a=(0,t.computed)((()=>({type:"row",span:e.config.span||24,items:e.config.items,labelWidth:e.config.labelWidth,[n?.keyProp||"__key"]:`${e.config[n?.keyProp||"__key"]}${String(e.index)}`}))),r=(0,t.computed)((()=>e.config.titleKey&&e.model[e.config.titleKey]?e.model[e.config.titleKey]:`组 ${String(e.index)}`)),i=(0,t.computed)((()=>e.groupModel?.length||0)),c=(0,t.computed)((()=>$(n,e.config.itemExtra,e))),d=()=>o("remove-item",e.index),m=()=>o("change"),s=()=>{l.value=!l.value},p=o=>{const t=e.config.delete;return!t||"function"!==typeof t||t(e.model,o,n?.values)},u=(n=0)=>o("swap-item",e.index,`${String(e.index)}${n}`),f=()=>{const{movable:o}=e.config;return void 0===o||("function"===typeof o?o(n,e.index||0,e.model,e.groupModel):o)};return{expand:l,expandHandler:s,title:r,showDelete:p,removeHandler:d,movable:f,changeOrder:u,itemExtra:c,rowConfig:a,changeHandler:m,length:i,Delete:g.Z}}}),se={class:"m-fields-group-list-item"},pe=(0,t.createTextVNode)("上移"),ue=(0,t.createTextVNode)("下移"),fe=["innerHTML"];function ge(e,o,n,l,a,r){const i=(0,t.resolveComponent)("caret-bottom"),c=(0,t.resolveComponent)("caret-right"),d=(0,t.resolveComponent)("el-icon"),m=(0,t.resolveComponent)("el-button"),s=(0,t.resolveComponent)("CaretRight"),p=(0,t.resolveComponent)("CaretBottom"),u=(0,t.resolveComponent)("m-form-container");return(0,t.openBlock)(),(0,t.createElementBlock)("div",se,[(0,t.createElementVNode)("div",null,[(0,t.createVNode)(d,{style:{"margin-right":"7px"},onClick:e.expandHandler},{default:(0,t.withCtx)((()=>[e.expand?((0,t.openBlock)(),(0,t.createBlock)(i,{key:0})):((0,t.openBlock)(),(0,t.createBlock)(c,{key:1}))])),_:1},8,["onClick"]),(0,t.createVNode)(m,{text:"",onClick:e.expandHandler},{default:(0,t.withCtx)((()=>[(0,t.createTextVNode)((0,t.toDisplayString)(e.title),1)])),_:1},8,["onClick"]),(0,t.withDirectives)((0,t.createVNode)(m,{text:"",icon:e.Delete,style:{color:"#f56c6c"},onClick:e.removeHandler},null,8,["icon","onClick"]),[[t.vShow,e.showDelete(parseInt(String(e.index)))]]),e.movable()?((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,{key:0},[(0,t.withDirectives)((0,t.createVNode)(m,{text:"",size:"small",onClick:o[0]||(o[0]=o=>e.changeOrder(-1))},{default:(0,t.withCtx)((()=>[pe,(0,t.createVNode)(d,null,{default:(0,t.withCtx)((()=>[(0,t.createVNode)(s)])),_:1})])),_:1},512),[[t.vShow,0!==e.index]]),(0,t.withDirectives)((0,t.createVNode)(m,{text:"",size:"small",onClick:o[1]||(o[1]=o=>e.changeOrder(1))},{default:(0,t.withCtx)((()=>[ue,(0,t.createVNode)(d,null,{default:(0,t.withCtx)((()=>[(0,t.createVNode)(p)])),_:1})])),_:1},512),[[t.vShow,e.index!==e.length-1]])],64)):(0,t.createCommentVNode)("",!0),e.itemExtra?((0,t.openBlock)(),(0,t.createElementBlock)("span",{key:1,innerHTML:e.itemExtra,class:"m-form-tip"},null,8,fe)):(0,t.createCommentVNode)("",!0)]),e.expand?((0,t.openBlock)(),(0,t.createBlock)(u,{key:0,config:e.rowConfig,model:e.model,labelWidth:e.labelWidth,prop:`${e.prop}${e.prop?".":""}${String(e.index)}`,size:e.size,onChange:e.changeHandler},null,8,["config","model","labelWidth","prop","size","onChange"])):(0,t.createCommentVNode)("",!0)])}var he=P(me,[["render",ge]]);const ve=(0,t.defineComponent)({name:"m-form-group-list",components:{MFieldsGroupListItem:he},props:{labelWidth:String,model:{type:Object,default:()=>({})},config:{type:Object,default:()=>({})},prop:{type:String,default:""},size:String,name:{type:String,default:""}},emits:["change"],setup(e,{emit:o}){const n=(0,t.inject)("mForm"),l=(0,t.computed)((()=>!!e.name&&("function"===typeof e.config.addable?e.config.addable(n,{model:e.model[e.name],formValue:n?.values,prop:e.prop,config:e.config}):"undefined"===typeof e.config.addable||e.config.addable))),a=()=>{if(!e.name)return!1;o("change",e.model[e.name])},r=async()=>{if(!e.name)return!1;let o={};"function"===typeof e.config.defaultAdd?o=await e.config.defaultAdd(n,{model:e.model[e.name],formValue:n?.values,prop:e.prop,config:e.config}):e.config.defaultAdd&&(o=e.config.defaultAdd);const t=await q(n,{config:e.config.items,initValues:o});e.model[e.name].push(t)},i=o=>{if(!e.name)return!1;e.model[e.name].splice(o,1),a()},c=(o,n)=>{if(!e.name)return!1;const[t]=e.model[e.name].splice(o,1);e.model[e.name].splice(n,0,t),a()},d=()=>{e.config.type="table",e.config.groupItems=e.config.items,e.config.items=e.config.tableItems||e.config.items.map((e=>({...e,label:e.label||e.text,text:null})))};return{addable:l,toggleMode:d,removeHandler:i,swapHandler:c,changeHandler:a,addHandler:r}}}),ye={class:"m-fields-group-list"},be=["innerHTML"],ke={key:1,class:"el-table__empty-block"},Ce=(0,t.createElementVNode)("span",{class:"el-table__empty-text"},"暂无数据",-1),xe=[Ce],Ve=(0,t.createTextVNode)("添加组"),Be=(0,t.createTextVNode)("切换为表格");function we(e,o,n,l,a,r){const i=(0,t.resolveComponent)("m-fields-group-list-item"),c=(0,t.resolveComponent)("el-button");return(0,t.openBlock)(),(0,t.createElementBlock)("div",ye,[e.config.extra?((0,t.openBlock)(),(0,t.createElementBlock)("div",{key:0,innerHTML:e.config.extra,style:{color:"rgba(0, 0, 0, 0.45)"}},null,8,be)):(0,t.createCommentVNode)("",!0),e.model[e.name]&&e.model[e.name].length?((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,{key:2},(0,t.renderList)(e.model[e.name],((o,n)=>((0,t.openBlock)(),(0,t.createBlock)(i,{key:n,model:o,config:e.config,prop:e.prop,index:n,"label-width":e.labelWidth,size:e.size,"group-model":e.model[e.name],onRemoveItem:e.removeHandler,onSwapItem:e.swapHandler,onChange:e.changeHandler},null,8,["model","config","prop","index","label-width","size","group-model","onRemoveItem","onSwapItem","onChange"])))),128)):((0,t.openBlock)(),(0,t.createElementBlock)("div",ke,xe)),e.addable?((0,t.openBlock)(),(0,t.createBlock)(c,{key:3,onClick:e.addHandler,size:"small"},{default:(0,t.withCtx)((()=>[Ve])),_:1},8,["onClick"])):(0,t.createCommentVNode)("",!0),e.config.enableToggleMode?((0,t.openBlock)(),(0,t.createBlock)(c,{key:4,icon:"el-icon-s-grid",size:"small",onClick:e.toggleMode},{default:(0,t.withCtx)((()=>[Be])),_:1},8,["onClick"])):(0,t.createCommentVNode)("",!0)])}var _e=P(ve,[["render",we]]);const Ee=(0,t.defineComponent)({name:"m-form-panel",components:{CaretBottom:f.Z,CaretRight:u},props:{labelWidth:String,model:{type:Object,default:()=>({})},config:{type:Object,default:()=>({})},prop:String,size:String,name:String},emits:["change"],setup(e,{emit:o}){const n=(0,t.inject)("mForm"),l=(0,t.ref)(!1!==e.config.expand),a=(0,t.computed)((()=>e.config.items)),r=o=>$(n,o,e),i=()=>o("change",e.model);return{mForm:n,expand:l,items:a,filter:r,changeHandler:i}}}),ze={class:"clearfix"},Ne=["innerHTML"],Se={key:0,style:{display:"flex"}},He={style:{flex:"1"}},Te=["src"];function Me(e,o,n,l,a,r){const i=(0,t.resolveComponent)("caret-bottom"),c=(0,t.resolveComponent)("caret-right"),d=(0,t.resolveComponent)("el-icon"),m=(0,t.resolveComponent)("m-form-container"),s=(0,t.resolveComponent)("el-card");return e.items&&e.items.length?((0,t.openBlock)(),(0,t.createBlock)(s,{key:0,class:"box-card m-form-panel","body-style":{display:e.expand?"block":"none"}},{header:(0,t.withCtx)((()=>[(0,t.createElementVNode)("div",ze,[(0,t.createElementVNode)("a",{href:"javascript:",style:{width:"100%",display:"block"},onClick:o[0]||(o[0]=o=>e.expand=!e.expand)},[(0,t.createVNode)(d,null,{default:(0,t.withCtx)((()=>[e.expand?((0,t.openBlock)(),(0,t.createBlock)(i,{key:0})):((0,t.openBlock)(),(0,t.createBlock)(c,{key:1}))])),_:1}),(0,t.createTextVNode)(" "+(0,t.toDisplayString)(e.filter(e.config.title))+" ",1),e.config&&e.config.extra?((0,t.openBlock)(),(0,t.createElementBlock)("span",{key:0,innerHTML:e.config.extra,class:"m-form-tip"},null,8,Ne)):(0,t.createCommentVNode)("",!0)])])])),default:(0,t.withCtx)((()=>[(0,t.createElementVNode)("div",null,[(0,t.renderSlot)(e.$slots,"default"),e.config.schematic?((0,t.openBlock)(),(0,t.createElementBlock)("div",Se,[(0,t.createElementVNode)("div",He,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.items,((o,n)=>((0,t.openBlock)(),(0,t.createBlock)(m,{key:o[e.mForm?.keyProp||"__key"]??n,config:o,model:e.name?e.model[e.name]:e.model,prop:e.prop,size:e.size,"label-width":e.config.labelWidth||e.labelWidth,onChange:e.changeHandler},null,8,["config","model","prop","size","label-width","onChange"])))),128))]),(0,t.createElementVNode)("img",{class:"m-form-schematic",src:e.config.schematic},null,8,Te)])):((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,{key:1},(0,t.renderList)(e.items,((o,n)=>((0,t.openBlock)(),(0,t.createBlock)(m,{key:o[e.mForm?.keyProp||"__key"]??n,config:o,model:e.name?e.model[e.name]:e.model,prop:e.prop,size:e.size,"label-width":e.config.labelWidth||e.labelWidth,onChange:e.changeHandler},null,8,["config","model","prop","size","label-width","onChange"])))),128))])])),_:3},8,["body-style"])):(0,t.createCommentVNode)("",!0)}var Ae=P(Ee,[["render",Me]]);const je=(0,t.defineComponent)({props:{labelWidth:String,expandMore:Boolean,span:Number,model:{type:Object,default:()=>({})},config:{type:Object,default:()=>({})},prop:String,size:String},emits:["change"],setup(e,{emit:o}){const n=(0,t.inject)("mForm"),l=()=>o("change",e.model);return{mForm:n,display:(0,t.computed)((()=>W(n,e.config.display,e))),changeHandler:l}}});function Fe(e,o,n,l,a,r){const i=(0,t.resolveComponent)("m-form-container"),c=(0,t.resolveComponent)("el-col");return(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createBlock)(c,{span:e.span},{default:(0,t.withCtx)((()=>[(0,t.createVNode)(i,{model:e.model,config:e.config,prop:e.prop,"label-width":e.config.labelWidth||e.labelWidth,"expand-more":e.expandMore,size:e.size,onChange:e.changeHandler},null,8,["model","config","prop","label-width","expand-more","size","onChange"])])),_:1},8,["span"])),[[t.vShow,e.display&&"hidden"!==e.config.type]])}var Le=P(je,[["render",Fe]]);const Oe=(0,t.defineComponent)({name:"m-form-row",components:{Col:Le},props:{labelWidth:String,expandMore:Boolean,model:{type:Object,default:()=>({})},config:{type:Object,default:()=>({})},prop:String,name:String,size:String},emits:["change"],setup(e,{emit:o}){const n=(0,t.inject)("mForm"),l=()=>o("change",e.name?e.model[e.name]:e.model);return{mForm:n,changeHandler:l}}});function Re(e,o,n,l,a,r){const i=(0,t.resolveComponent)("Col"),c=(0,t.resolveComponent)("el-row");return(0,t.openBlock)(),(0,t.createBlock)(c,{gutter:10},{default:(0,t.withCtx)((()=>[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.config.items,((o,n)=>((0,t.openBlock)(),(0,t.createBlock)(i,{key:o[e.mForm?.keyProp||"__key"]??n,span:o.span||e.config.span||24/e.config.items.length,config:o,labelWidth:e.config.labelWidth||e.labelWidth,expandMore:e.expandMore,model:e.name?e.model[e.name]:e.model,prop:e.prop,size:e.size,onChange:e.changeHandler},null,8,["span","config","labelWidth","expandMore","model","prop","size","onChange"])))),128))])),_:1})}var De=P(Oe,[["render",Re]]);const Ie=(0,t.defineComponent)({name:"m-form-step",props:{model:{type:Object,default:()=>({})},config:{type:Object,default:()=>({})},stepActive:{type:Number,default:()=>1},size:String,labelWidth:String},emits:["change"],setup(e,{emit:o}){const n=(0,t.inject)("mForm"),l=(0,t.ref)(1);(0,t.watchEffect)((()=>{l.value=e.stepActive}));const a=e=>{l.value=e+1,n?.$emit("update:stepActive",l.value)},r=()=>{o("change",e.model)};return{mForm:n,active:l,stepClick:a,changeHandler:r}}});function $e(e,o,n,l,a,r){const i=(0,t.resolveComponent)("el-step"),c=(0,t.resolveComponent)("el-steps"),d=(0,t.resolveComponent)("m-form-container");return(0,t.openBlock)(),(0,t.createElementBlock)("div",null,[(0,t.createVNode)(c,{active:e.active,"align-center":"",space:e.config.space},{default:(0,t.withCtx)((()=>[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.config.items,((o,n)=>((0,t.openBlock)(),(0,t.createBlock)(i,{key:o.__key,title:o.title,active:e.active,onClick:o=>e.stepClick(n)},null,8,["title","active","onClick"])))),128))])),_:1},8,["active","space"]),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.config.items,((o,n)=>((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,null,[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(o.items,(l=>((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,null,[l?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createBlock)(d,{key:l[e.mForm?.keyProp||"__key"],config:l,model:o.name?e.model[o.name]:e.model,prop:o.name,size:e.size,"label-width":e.config.labelWidth||e.labelWidth,onChange:e.changeHandler},null,8,["config","model","prop","size","label-width","onChange"])),[[t.vShow,e.active-1===n]]):(0,t.createCommentVNode)("",!0)],64)))),256))],64)))),256))])}var We=P(Ie,[["render",$e]]);let Ze=!1,qe=!0;const Pe=(0,t.defineComponent)({name:"m-form-table",props:{name:{type:String,required:!0},model:{type:Object,required:!0,default:()=>({})},config:{type:Object,required:!0,default:()=>({})},prop:{type:String},labelWidth:{type:String},sort:{type:Boolean,default:!1},sortKey:{type:String,default:""},text:{type:String},size:String,enableToggleMode:{type:Boolean,default:!0}},emits:["change","select"],setup(e,{emit:o}){let n=null;const l=(0,t.inject)("mForm"),a=(0,t.ref)(),r=(0,t.ref)(),i=(0,t.ref)(),c=(0,t.ref)(10),d=(0,t.ref)(0),m=(0,t.ref)(1),s=(0,t.ref)(!1),p=(0,t.computed)((()=>e.name||e.config.name||"")),u=({prop:o,order:n})=>{"ascending"===n?e.model[p.value]=e.model[p.value].sort(((e,n)=>e[o]-n[o])):"descending"===n&&(e.model[p.value]=e.model[p.value].sort(((e,n)=>n[o]-e[o])))},f=()=>{m.value+=1,setTimeout((()=>y()))},v=(o,n)=>{if([e.model[p.value][o]]=e.model[p.value].splice(n,1,e.model[p.value][o]),e.sortKey)for(let t=e.model[p.value].length-1,l=0;t>=0;t--,l++)e.model[p.value][l][e.sortKey]=t;l?.$emit("field-change",e.prop,e.model[p.value])},y=()=>{const n=a.value?.$el;if(n?.querySelectorAll(".el-table__body > tbody")){const t=n.querySelectorAll(".el-table__body > tbody")[0],a=H["default"].create(t,{onEnd:({newIndex:t,oldIndex:r})=>{"undefined"!==typeof t&&"undefined"!==typeof r&&(v(t,r),o("change",e.model[p.value]),f(),a.destroy(),l?.$emit("field-change",e.prop,e.model[p.value]),(0,T._v)(1e3).then((()=>{const e=n.querySelectorAll(".el-table__body > tbody > tr");e?.[t]&&(e[t].style.backgroundColor="rgba(243, 89, 59, 0.2)",(0,T._v)(1e3).then((()=>{e[t].style.backgroundColor=""})))})))}})}},b=async n=>{if(e.config.max&&e.model[p.value].length>=e.config.max)return void S.z8.error(`最多新增配置不能超过${e.config.max}条`);const t=e.config.items,a=e.config.enum||[];let r=[];const{length:i}=e.model[p.value],c=e.config.key||"id";let d={};if(a.length){if(i>=a.length)return;r=a.filter((o=>{let n=0;for(;n<i;n++)if(o[c]===e.model[p.value][n][c])break;return n===i})),r.length>0&&(d=r[0])}else Array.isArray(n)?t.forEach(((e,o)=>{e.name&&(d[e.name]=n[o])})):("function"===typeof e.config.defaultAdd?d=await e.config.defaultAdd(l,{model:e.model[p.value],formValue:l?.values}):e.config.defaultAdd&&(d=e.config.defaultAdd),d=await q(l,{config:t,initValues:d}));e.sortKey&&i&&(d[e.sortKey]=e.model[p.value][i-1][e.sortKey]-1),e.model[p.value].push(d),o("change",e.model[p.value])};return Ze||!qe||globalThis.XLSX||(qe=!1,(0,T.Dg)("https://cdn.bootcdn.net/ajax/libs/xlsx/0.17.0/xlsx.full.min.js").then((()=>{Ze=!0})).catch((()=>{qe=!0}))),(0,t.onMounted)((()=>{e.config.defautSort&&u(e.config.defautSort),e.sort&&e.sortKey&&e.model[p.value].sort(((o,n)=>n[e.sortKey]-o[e.sortKey])),e.config.dropSort&&y()})),{mForm:l,pagesize:c,pagecontext:d,foreUpdate:f,isFullscreen:s,elTable:a,mTable:i,excelBtn:r,modelName:p,updateKey:m,ArrowDown:h.Z,ArrowUp:C,Delete:g.Z,FullScreen:_,Grid:E.Z,data:(0,t.computed)((()=>e.model[p.value].filter(((e,o)=>o>=d.value*c.value&&o+1<=(d.value+1)*c.value)))),addable:(0,t.computed)((()=>!e.model[p.value].length||("function"===typeof e.config.addable?e.config.addable(l,{model:e.model[p.value],formValue:l?.values,prop:e.prop}):"undefined"===typeof e.config.addable||e.config.addable))),selection:(0,t.computed)((()=>"function"===typeof e.config.selection?e.config.selection(l,{model:e.model[p.value]}):e.config.selection)),importable:(0,t.computed)((()=>"function"===typeof e.config.importable?e.config.importable(l,{formValue:l?.values,model:e.model[p.value]}):"undefined"!==typeof e.config.importable&&e.config.importable)),sortChange:u,display(o){return W(l,o,e)},itemExtra(o,n){return"function"===typeof o?o(l,{values:l?.initValues,model:e.model,formValue:l?l.values:e.model,prop:e.prop,index:n}):o},newHandler:b,removeHandler(n){e.model[p.value].splice(n,1),o("change",e.model[p.value])},selectHandle(n,t){"string"===typeof e.config.selection&&"single"===e.config.selection&&(a.value?.clearSelection(),a.value?.toggleRowSelection(t,!0)),o("select",n,t),"function"===typeof e.config.onSelect&&e.config.onSelect(l,{selection:n,row:t,config:e.config})},toggleRowSelection(e,o){a.value?.toggleRowSelection.call(a.value,e,o)},makeConfig(e){const o=(0,z.Z)(e);return delete o.display,o},upHandler(e){n&&clearTimeout(n),n=setTimeout((()=>{v(e,e-1)}),300)},topHandler(e){n&&clearTimeout(n);const o=e;for(let n=0;n<o;n++)v(e,e-1),e-=1},downHandler(e){n&&clearTimeout(n),n=setTimeout((()=>{v(e,e+1)}),300)},bottomHandler(o){n&&clearTimeout(n);const t=e.model[p.value].length-1-o;for(let e=0;e<t;e++)v(o,o+1),o+=1},showDelete(o){const n=e.config.delete;return!n||"function"!==typeof n||n(e.model[p.value],o,l?.values)},clearHandler(){const o=e.model[p.value].length;e.model[p.value].splice(0,o),l?.$emit("field-change",e.prop,e.model[p.value])},excelHandler(e){if(!e||!e.raw)return!1;const o=new FileReader;return o.onload=()=>{const e=o.result,n=globalThis.XLSX.read(e,{type:"array"});n.SheetNames.forEach((e=>{const o=globalThis.XLSX.utils.sheet_to_json(n.Sheets[e],{header:1});o?.[0]&&o.forEach((e=>{b(e)})),setTimeout((()=>{r.value?.clearFiles()}),300)}))},o.readAsArrayBuffer(e.raw),!1},handleSizeChange(e){c.value=e},handleCurrentChange(e){d.value=e-1},toggleMode(){const o=e=>{if(!e)return"0px";const o=e.match(/[^\x00-\xff]/g)?.length||0,n=e.length-o;return`${Math.max(8*n+20*o,80)}px`};e.config.type="groupList",e.config.enableToggleMode=!0,e.config.tableItems=e.config.items,e.config.items=e.config.groupItems||e.config.items.map((e=>{const n=e.text||e.label,t=o(n);return{...e,text:n,labelWidth:t,span:e.span||12}}))},toggleFullscreen(){s.value?(i.value?.classList.remove("fixed"),s.value=!1):(i.value?.classList.add("fixed"),s.value=!0)},getProp(o){const{prop:n}=(0,t.toRefs)(e);return`${n.value}${n.value?".":""}${o+1+d.value*c.value-1}`}}}}),Ue=["innerHTML"],Ke={class:"el-form-item__content"},Ye=["innerHTML"],Ge=(0,t.createTextVNode)("添加"),Xe=(0,t.createTextVNode)("   "),Qe=(0,t.createTextVNode)("展开配置"),Je=(0,t.createTextVNode)("导入EXCEL"),eo=(0,t.createTextVNode)("  "),oo=(0,t.createTextVNode)("清空"),no={class:"bottom",style:{"text-align":"right"}};function to(e,o,n,l,a,r){const i=(0,t.resolveComponent)("el-table-column"),c=(0,t.resolveComponent)("el-button"),d=(0,t.resolveComponent)("el-tooltip"),m=(0,t.resolveComponent)("m-form-container"),s=(0,t.resolveComponent)("el-table"),p=(0,t.resolveComponent)("el-upload"),u=(0,t.resolveComponent)("el-pagination");return(0,t.openBlock)(),(0,t.createElementBlock)("div",{ref:"mTable",class:(0,t.normalizeClass)(["m-fields-table",{"m-fields-table-item-extra":e.config.itemExtra}])},[e.config.extra?((0,t.openBlock)(),(0,t.createElementBlock)("span",{key:0,style:{color:"rgba(0, 0, 0, 0.45)"},innerHTML:e.config.extra},null,8,Ue)):(0,t.createCommentVNode)("",!0),(0,t.createElementVNode)("div",Ke,[(0,t.createVNode)(d,{content:"拖拽可排序",placement:"left-start",disabled:!0!==e.config.dropSort},{default:(0,t.withCtx)((()=>[e.model[e.modelName]?((0,t.openBlock)(),(0,t.createBlock)(s,{ref:"elTable",style:{width:"100%"},data:e.model[e.modelName],border:e.config.border,"max-height":e.config.maxHeight,"default-expand-all":!0,key:e.updateKey,onSelect:e.selectHandle,onSortChange:e.sortChange},{default:(0,t.withCtx)((()=>[e.config.itemExtra?((0,t.openBlock)(),(0,t.createBlock)(i,{key:0,fixed:"left",width:"30",type:"expand"},{default:(0,t.withCtx)((o=>[(0,t.createElementVNode)("span",{innerHTML:e.itemExtra(e.config.itemExtra,o.$index),class:"m-form-tip"},null,8,Ye)])),_:1})):(0,t.createCommentVNode)("",!0),(0,t.createVNode)(i,{label:"操作",width:"60",fixed:!1===e.config.fixed?void 0:"left"},{default:(0,t.withCtx)((o=>[(0,t.withDirectives)((0,t.createVNode)(c,{type:"danger",text:"",icon:e.Delete,onClick:n=>e.removeHandler(o.$index+1+e.pagecontext*e.pagesize-1)},null,8,["icon","onClick"]),[[t.vShow,e.showDelete(o.$index+1+e.pagecontext*e.pagesize-1)]])])),_:1},8,["fixed"]),e.sort&&e.model[e.modelName]&&e.model[e.modelName].length>1?((0,t.openBlock)(),(0,t.createBlock)(i,{key:1,label:"排序",width:"60"},{default:(0,t.withCtx)((o=>[o.$index+1+e.pagecontext*e.pagesize-1!==0?((0,t.openBlock)(),(0,t.createBlock)(d,{key:0,content:"点击上移，双击置顶",placement:"top"},{default:(0,t.withCtx)((()=>[(0,t.createVNode)(c,{plain:"",size:"small",type:"primary",icon:e.ArrowUp,text:"",onClick:n=>e.upHandler(o.$index+1+e.pagecontext*e.pagesize-1),onDblclick:n=>e.topHandler(o.$index+1+e.pagecontext*e.pagesize-1)},null,8,["icon","onClick","onDblclick"])])),_:2},1024)):(0,t.createCommentVNode)("",!0),o.$index+1+e.pagecontext*e.pagesize-1!==e.model[e.modelName].length-1?((0,t.openBlock)(),(0,t.createBlock)(d,{key:1,content:"点击下移，双击置底",placement:"top"},{default:(0,t.withCtx)((()=>[(0,t.createVNode)(c,{plain:"",size:"small",type:"primary",icon:e.ArrowDown,text:"",onClick:n=>e.downHandler(o.$index+1+e.pagecontext*e.pagesize-1),onDblclick:n=>e.bottomHandler(o.$index+1+e.pagecontext*e.pagesize-1)},null,8,["icon","onClick","onDblclick"])])),_:2},1024)):(0,t.createCommentVNode)("",!0)])),_:1})):(0,t.createCommentVNode)("",!0),e.selection?((0,t.openBlock)(),(0,t.createBlock)(i,{key:2,align:"center","header-align":"center",type:"selection",width:"45"})):(0,t.createCommentVNode)("",!0),(0,t.createVNode)(i,{width:"60",label:"序号"},{default:(0,t.withCtx)((o=>[(0,t.createTextVNode)((0,t.toDisplayString)(o.$index+1+e.pagecontext*e.pagesize),1)])),_:1}),((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.config.items,((n,l)=>((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,null,["hidden"!==n.type&&e.display(n.display)?((0,t.openBlock)(),(0,t.createBlock)(i,{prop:n.name,width:n.width,label:n.label,sortable:n.sortable,"sort-orders":["ascending","descending"],key:n[e.mForm?.keyProp||"__key"]??l,"class-name":!0===e.config.dropSort?"el-table__column--dropable":""},{default:(0,t.withCtx)((l=>[l.$index>-1?((0,t.openBlock)(),(0,t.createBlock)(m,{key:0,labelWidth:"0",prop:e.getProp(l.$index),rules:n.rules,config:e.makeConfig(n),model:l.row,size:e.size,onChange:o[0]||(o[0]=o=>e.$emit("change",e.model[e.modelName]))},null,8,["prop","rules","config","model","size"])):(0,t.createCommentVNode)("",!0)])),_:2},1032,["prop","width","label","sortable","class-name"])):(0,t.createCommentVNode)("",!0)],64)))),256))])),_:1},8,["data","border","max-height","onSelect","onSortChange"])):(0,t.createCommentVNode)("",!0)])),_:1},8,["disabled"]),(0,t.renderSlot)(e.$slots,"default"),e.addable?((0,t.openBlock)(),(0,t.createBlock)(c,{key:0,size:"small",type:"primary",plain:"",onClick:o[1]||(o[1]=o=>e.newHandler())},{default:(0,t.withCtx)((()=>[Ge])),_:1})):(0,t.createCommentVNode)("",!0),Xe,e.enableToggleMode&&!e.isFullscreen?((0,t.openBlock)(),(0,t.createBlock)(c,{key:1,icon:e.Grid,size:"small",type:"primary",onClick:e.toggleMode},{default:(0,t.withCtx)((()=>[Qe])),_:1},8,["icon","onClick"])):(0,t.createCommentVNode)("",!0),!1!==e.config.enableFullscreen?((0,t.openBlock)(),(0,t.createBlock)(c,{key:2,icon:e.FullScreen,size:"small",type:"primary",onClick:e.toggleFullscreen},{default:(0,t.withCtx)((()=>[(0,t.createTextVNode)((0,t.toDisplayString)(e.isFullscreen?"退出全屏":"全屏编辑"),1)])),_:1},8,["icon","onClick"])):(0,t.createCommentVNode)("",!0),e.importable?((0,t.openBlock)(),(0,t.createBlock)(p,{key:3,ref:"excelBtn",action:"/noop","on-change":e.excelHandler,"auto-upload":!1,style:{display:"inline-block"}},{default:(0,t.withCtx)((()=>[(0,t.createVNode)(c,{size:"small",type:"success",plain:""},{default:(0,t.withCtx)((()=>[Je])),_:1})])),_:1},8,["on-change"])):(0,t.createCommentVNode)("",!0),eo,e.importable?((0,t.openBlock)(),(0,t.createBlock)(c,{key:4,size:"small",type:"warning",plain:"",onClick:o[2]||(o[2]=o=>e.clearHandler())},{default:(0,t.withCtx)((()=>[oo])),_:1})):(0,t.createCommentVNode)("",!0)]),(0,t.createElementVNode)("div",no,[(0,t.createVNode)(u,{layout:"total, sizes, prev, pager, next, jumper","hide-on-single-page":e.model[e.modelName].length<e.pagesize,"current-page":e.pagecontext+1,"page-sizes":[e.pagesize,60,120,300],"page-size":e.pagesize,total:e.model[e.modelName].length,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["hide-on-single-page","current-page","page-sizes","page-size","total","onSizeChange","onCurrentChange"])])],2)}var lo=P(Pe,[["render",to]]);const ao=(e,o,n)=>{const{config:t,model:l,prop:a}=o,{active:r}=t;return"function"===typeof r?r(e,{model:l,formValue:e?.values,prop:a}):+n>=o.config.items.length?"0":"undefined"!==typeof r?r:"0"},ro=(e,o,n)=>{const{config:t,model:l,prop:a}=n;o.name=o.paneName,"function"===typeof t.onTabClick&&t.onTabClick(e,o,{model:l,formValue:e?.values,prop:a,config:t});const r=t.items.find((e=>o.name===e.status));r&&"function"===typeof r.onTabClick&&r.onTabClick(e,o,{model:l,formValue:e?.values,prop:a,config:t})},io=(0,t.defineComponent)({name:"m-form-tab",props:{labelWidth:String,expandMore:Boolean,model:{type:Object,default:()=>({})},config:{type:Object,default:()=>({})},prop:String,name:String,size:String},emits:{change(e){return e}},setup(e,{emit:o}){const n=(0,t.inject)("mForm"),l=(0,t.ref)(ao(n,e,"")),a=(0,t.computed)((()=>{if(e.config.dynamic){if(!e.config.name)throw new Error("dynamic tab 必须配置name");return e.model[e.config.name]||[]}return e.config.items})),r=o=>$(n,o,e);return(0,t.watchEffect)((()=>{"function"===typeof e.config.activeChange&&e.config.activeChange(n,l.value,{model:e.model,prop:e.prop})})),{mForm:n,activeTabName:l,tabs:a,filter:r,tabItems:o=>e.config.dynamic?e.config.items:o.items,tabClickHandler:o=>ro(n,o,e),onTabAdd:()=>{if(!e.config.name)throw new Error("dynamic tab 必须配置name");if("function"===typeof e.config.onTabAdd)e.config.onTabAdd(n,{model:e.model,prop:e.prop,config:e.config});else if(a.value.length>0){const o=(0,z.Z)(a.value[0]);o.title=`标签${a.value.length+1}`,e.model[e.config.name].push(o)}o("change",e.model),n?.$emit("field-change",e.prop,e.model[e.config.name])},onTabRemove:t=>{if(!e.config.name)throw new Error("dynamic tab 必须配置name");"function"===typeof e.config.onTabRemove?e.config.onTabRemove(n,t,{model:e.model,prop:e.prop,config:e.config}):(e.model[e.config.name].splice(+t,1),(t<l.value||l.value>=e.model[e.config.name].length)&&(l.value=(+l.value-1).toString(),ro(n,{name:l.value},e))),o("change",e.model),n?.$emit("field-change",e.prop,e.model[e.config.name])},display:o=>W(n,o,e),changeHandler:()=>{o("change",e.model),"function"===typeof e.config.onChange&&e.config.onChange(n,{model:e.model,prop:e.prop,config:e.config})}}}}),co=io;function mo(e,o,n,l,a,r){const i=(0,t.resolveComponent)("m-form-container"),c=(0,t.resolveComponent)("el-tab-pane"),d=(0,t.resolveComponent)("el-tabs");return(0,t.openBlock)(),(0,t.createBlock)(d,{modelValue:e.activeTabName,"onUpdate:modelValue":o[0]||(o[0]=o=>e.activeTabName=o),class:(0,t.normalizeClass)(e.config.dynamic?"magic-form-dynamic-tab":"magic-form-tab"),type:e.config.tabType,editable:e.config.editable||!1,"tab-position":e.config.tabPosition||"top",onTabClick:e.tabClickHandler,onTabAdd:e.onTabAdd,onTabRemove:e.onTabRemove},{default:(0,t.withCtx)((()=>[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.tabs,((o,n)=>((0,t.openBlock)(),(0,t.createElementBlock)(t.Fragment,null,[e.display(o.display)&&e.tabItems(o).length?((0,t.openBlock)(),(0,t.createBlock)(c,{key:o[e.mForm?.keyProp||"__key"]??n,name:e.filter(o.status)||n.toString(),label:e.filter(o.title),lazy:o.lazy||!1},{default:(0,t.withCtx)((()=>[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.tabItems(o),(l=>((0,t.openBlock)(),(0,t.createBlock)(i,{key:l[e.mForm?.keyProp||"__key"],config:l,model:e.config.dynamic?(e.name?e.model[e.name]:e.model)[n]:o.name?(e.name?e.model[e.name]:e.model)[o.name]:e.name?e.model[e.name]:e.model,prop:e.config.dynamic?`${e.prop}${e.prop?".":""}${String(n)}`:e.prop,size:e.size,"label-width":o.labelWidth||e.labelWidth,"expand-more":e.expandMore,onChange:e.changeHandler},null,8,["config","model","prop","size","label-width","expand-more","onChange"])))),128))])),_:2},1032,["name","label","lazy"])):(0,t.createCommentVNode)("",!0)],64)))),256))])),_:1},8,["modelValue","class","type","editable","tab-position","onTabClick","onTabAdd","onTabRemove"])}var so=P(co,[["render",mo]]);let po={};const uo=e=>{po=e},fo=e=>po[e];var go={model:{type:Object,required:!0,default:()=>({})},name:{type:String,default:""},disabled:{type:Boolean,default:!1},size:String,prop:String,initValues:Object,values:Object};const ho=e=>{if(!e)return;const o=(0,t.inject)("mForm"),n=(0,t.getCurrentInstance)();(0,t.watch)((()=>n?.proxy),(n=>{n?o?.setField(e,n):o?.deleteField(e)}),{immediate:!0})},vo=(0,t.defineComponent)({name:"m-fields-cascader",props:{...go,config:{type:Object,required:!0}},emits:["change"],setup(e,{emit:o}){const n=(0,t.inject)("mForm"),l=(0,t.getCurrentInstance)();ho(e.prop);const a=fo("request"),r=(0,t.ref)(null),i=(0,t.ref)(null),c=Array.isArray(e.config.options)?(0,t.ref)(e.config.options):(0,t.ref)([]),d=(0,t.ref)(null),m=async function(){const{config:o}=e,{option:t}=o;if(!t)return;let{body:l}=t;const r={url:t.url,cache:t.cache,timeout:t.timeout,data:{}};l&&n&&("function"===typeof l&&e.model&&n&&(l=l(n,{model:e.model,formValue:n.values,formValues:n.values,config:e.config})),r.data=l);const i=await a(r);d.value=i[t.root],d.value&&"function"===typeof t?.item&&(c.value=t.item(i[t.root]))};"function"===typeof e.config.options&&e.model&&n?(0,t.watchEffect)((()=>c.value=e.config.options(l,{model:e.model,formValues:n.values}))):e.config.options&&e.config.options.length&&!e.config.remote||Promise.resolve(m());const s=(0,t.computed)((()=>"post"===e.config.add?.action.method?o=>a({...e.config?.add?.action.body,...o}):null));return{options:c,remoteData:d,addButtonStyle:{top:0,left:0,width:"auto"},dialogVisible:!1,cascader:r,dialog:i,action:s,setRemoteOptions:m,changeHandler:e=>{r.value&&(r.value.query="",r.value.previousQuery=null,o("change",e))},addHandler:()=>{i.value&&(i.value.dialogVisible=!0)},editAfterAction:()=>{m()}}}}),yo={class:"m-cascader",style:{width:"100%"}};function bo(e,o,n,l,a,r){const i=(0,t.resolveComponent)("el-cascader");return(0,t.openBlock)(),(0,t.createElementBlock)("div",yo,[(0,t.createVNode)(i,{modelValue:e.model[e.name],"onUpdate:modelValue":o[0]||(o[0]=o=>e.model[e.name]=o),ref:"cascader",style:{width:"100%"},clearable:"",filterable:"",size:e.size,placeholder:e.config.placeholder,disabled:e.disabled,options:e.options,props:{multiple:e.config.multiple},onChange:e.changeHandler},null,8,["modelValue","size","placeholder","disabled","options","props","onChange"])])}var ko=P(vo,[["render",bo]]);const Co=(0,t.defineComponent)({name:"m-fields-checkbox",props:{...go,config:{type:Object,required:!0}},emits:["change","input"],setup(e,{emit:o}){return ho(e.prop),{activeValue:(0,t.computed)((()=>"undefined"!==typeof e.config.activeValue?e.config.activeValue:"number"===e.config.filter?1:void 0)),inactiveValue:(0,t.computed)((()=>"undefined"!==typeof e.config.inactiveValue?e.config.inactiveValue:"number"===e.config.filter?0:void 0)),changeHandler(e){o("change",e)}}}});function xo(e,o,n,l,a,r){const i=(0,t.resolveComponent)("el-checkbox");return(0,t.openBlock)(),(0,t.createBlock)(i,{modelValue:e.model[e.name],"onUpdate:modelValue":o[0]||(o[0]=o=>e.model[e.name]=o),size:e.size,trueLabel:e.activeValue,falseLabel:e.inactiveValue,disabled:e.disabled,label:e.config.text,onChange:e.changeHandler},null,8,["modelValue","size","trueLabel","falseLabel","disabled","label","onChange"])}var Vo=P(Co,[["render",xo]]);const Bo=(0,t.defineComponent)({name:"m-fields-checkbox-group",props:{...go,config:{type:Object,required:!0}},emits:["change"],setup(e,{emit:o}){return ho(e.prop),e.model&&!e.model[e.name]&&(e.model[e.name]=[]),{changeHandler:e=>{o("change",e)}}}});function wo(e,o,n,l,a,r){const i=(0,t.resolveComponent)("el-checkbox"),c=(0,t.resolveComponent)("el-checkbox-group");return(0,t.openBlock)(),(0,t.createBlock)(c,{modelValue:e.model[e.name],"onUpdate:modelValue":o[0]||(o[0]=o=>e.model[e.name]=o),size:e.size,disabled:e.disabled,onChange:e.changeHandler},{default:(0,t.withCtx)((()=>[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.config.options,(e=>((0,t.openBlock)(),(0,t.createBlock)(i,{label:e.value,key:e.value},{default:(0,t.withCtx)((()=>[(0,t.createTextVNode)((0,t.toDisplayString)(e.text),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue","size","disabled","onChange"])}var _o=P(Bo,[["render",wo]]);const Eo={key:0},zo=(0,t.defineComponent)({name:"m-fields-color-picker"}),No=(0,t.defineComponent)({...zo,props:{...go,config:{type:Object,required:!0}},emits:["change"],setup(e,{emit:o}){const n=e;ho(n.prop);const l=e=>o("change",e);return(e,o)=>{const n=(0,t.resolveComponent)("el-color-picker");return e.model?((0,t.openBlock)(),(0,t.createElementBlock)("div",Eo,[(0,t.createVNode)(n,{modelValue:e.model[e.name],"onUpdate:modelValue":o[0]||(o[0]=o=>e.model[e.name]=o),size:e.size,disabled:e.disabled,showAlpha:!0,onChange:l},null,8,["modelValue","size","disabled"])])):(0,t.createCommentVNode)("",!0)}}}),So=(0,t.defineComponent)({name:"m-fields-date",props:{...go,config:{type:Object,required:!0}},emits:["change","input"],setup(e,{emit:o}){return ho(e.prop),e.model[e.name]=(0,T.K1)(e.model[e.name],""),{changeHandler(e){o("change",e)}}}});function Ho(e,o,n,l,a,r){const i=(0,t.resolveComponent)("el-date-picker");return(0,t.openBlock)(),(0,t.createBlock)(i,{modelValue:e.model[e.name],"onUpdate:modelValue":o[0]||(o[0]=o=>e.model[e.name]=o),type:"date",size:e.size,placeholder:e.config.placeholder,disabled:e.disabled,format:e.config.format,"value-format":e.config.format||"YYYY-MM-DD HH:mm:ss",onChange:e.changeHandler},null,8,["modelValue","size","placeholder","disabled","format","value-format","onChange"])}var To=P(So,[["render",Ho]]);const Mo=(0,t.defineComponent)({name:"m-fields-daterange",props:{...go,config:{type:Object,required:!0}},emits:["change"],setup(e,{emit:o}){ho(e.prop);const{names:n}=e.config,l=(0,t.ref)([]);void 0!==e.model&&(n?.length?l.value=n.map((o=>(0,T.K1)(e.model?.[o],""))):e.name&&e.model[e.name]&&(l.value=e.model[e.name].map((e=>(0,T.K1)(e,"")))));const a=o=>{n?.length&&o instanceof Array?n.forEach(((n,t)=>{e.model&&(e.model[n]=(0,T.K1)(o[t].toString(),""))})):e.model&&e.name&&o instanceof Date?e.model[e.name]=(0,T.K1)(o.toString(),""):n?.length?n.forEach((o=>{e.model&&(e.model[o]=void 0)})):e.name&&(e.model[e.name]=void 0)};return{value:l,changeHandler(e){a(e),o("change",e)}}}});function Ao(e,o,n,l,a,r){const i=(0,t.resolveComponent)("el-date-picker");return(0,t.openBlock)(),(0,t.createBlock)(i,{modelValue:e.value,"onUpdate:modelValue":o[0]||(o[0]=o=>e.value=o),type:"datetimerange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",size:e.size,"unlink-panels":!0,disabled:e.disabled,"default-time":e.config.defaultTime,onChange:e.changeHandler},null,8,["modelValue","size","disabled","default-time","onChange"])}var jo=P(Mo,[["render",Ao]]);const Fo=(0,t.defineComponent)({name:"m-fields-datetime",props:{...go,config:{type:Object,required:!0}},emits:["change"],setup(e,{emit:o}){ho(e.prop);const n=e.model?.[e.name].toString();return e.model&&(e.model[e.name]="Invalid Date"===n?"":(0,T.K1)(e.model[e.name],"",e.config.valueFormat)),{value:n,changeHandler:e=>{o("change",e)}}}});function Lo(e,o,n,l,a,r){const i=(0,t.resolveComponent)("el-date-picker");return(0,t.openBlock)(),(0,t.createBlock)(i,{modelValue:e.model[e.name],"onUpdate:modelValue":o[0]||(o[0]=o=>e.model[e.name]=o),"popper-class":"magic-datetime-picker-popper",type:"datetime",size:e.size,placeholder:e.config.placeholder,disabled:e.disabled,format:e.config.format||"YYYY-MM-DD HH:mm:ss","value-format":e.config.valueFormat||"YYYY-MM-DD HH:mm:ss","default-time":e.config.defaultTime,onChange:e.changeHandler},null,8,["modelValue","size","placeholder","disabled","format","value-format","default-time","onChange"])}var Oo=P(Fo,[["render",Lo]]);const Ro={key:0},Do=(0,t.defineComponent)({name:"m-fields-display"}),Io=(0,t.defineComponent)({...Do,props:{...go,config:{type:Object,required:!0}},setup(e){const o=e,n=(0,t.computed)((()=>o.name||o.config.name||""));return o.config.initValue&&n.value&&o.model&&(o.model[n.value]=o.config.initValue),ho(o.prop),(e,o)=>e.model?((0,t.openBlock)(),(0,t.createElementBlock)("span",Ro,(0,t.toDisplayString)(e.model[(0,t.unref)(n)]),1)):(0,t.createCommentVNode)("",!0)}}),$o=(0,t.defineComponent)({name:"m-fields-dynamic-field",props:{...go,config:{type:Object,required:!0}},emits:["change"],setup(e,{emit:o}){ho(e.prop);const n=fo("request"),l=(0,t.reactive)({value:{}}),a=(0,t.reactive)({value:{}}),r=async()=>{if("function"!==typeof e.config.returnFields||!e.model)return;const t=await e.config.returnFields(e.config,e.model,n);l.value={},a.value={},t.forEach((n=>{if("object"!==typeof n||void 0===n.name)return;let t=e.model?.[n.name]||"";t||void 0===n.defaultValue||(t=n.defaultValue,o("change",t,n.name)),l.value[n.name]=t,a.value[n.name]=n.label||""}))},i=(0,t.watch)((()=>e.model?.[e.config.dynamicKey]),(e=>{""!==e&&r()}),{immediate:!0});return(0,t.onBeforeUnmount)((()=>{"function"===typeof i&&i()})),{request:n,fieldMap:l,fieldLabelMap:a,unwatch:i,changeFieldMap:r,inputChangeHandler:e=>{o("change",l.value[e],e)}}},methods:{init(){}}}),Wo={class:"m-fields-dynamic-field"};function Zo(e,o,n,l,a,r){const i=(0,t.resolveComponent)("el-input"),c=(0,t.resolveComponent)("el-form-item"),d=(0,t.resolveComponent)("el-form");return(0,t.openBlock)(),(0,t.createElementBlock)("div",Wo,[(0,t.createVNode)(d,{size:"small"},{default:(0,t.withCtx)((()=>[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(Object.keys(e.fieldMap.value),(o=>((0,t.openBlock)(),(0,t.createBlock)(c,{key:o,label:e.fieldLabelMap.value[o]},{default:(0,t.withCtx)((()=>[(0,t.createVNode)(i,{modelValue:e.fieldMap.value[o],"onUpdate:modelValue":n=>e.fieldMap.value[o]=n,placeholder:e.fieldLabelMap.value[o],onChange:n=>e.inputChangeHandler(o)},null,8,["modelValue","onUpdate:modelValue","placeholder","onChange"])])),_:2},1032,["label"])))),128))])),_:1})])}var qo=P($o,[["render",Zo]]);const Po=(0,t.defineComponent)({name:"m-fields-hidden"}),Uo=(0,t.defineComponent)({...Po,props:{...go,config:{type:Object,required:!0}},setup(e){const o=e,n=(0,t.computed)((()=>o.name||o.config.name||""));return ho(o.prop),(e,o)=>e.model?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)("input",{key:0,"onUpdate:modelValue":o[0]||(o[0]=o=>e.model[(0,t.unref)(n)]=o),type:"hidden"},null,512)),[[t.vModelText,e.model[(0,t.unref)(n)]]]):(0,t.createCommentVNode)("",!0)}}),Ko=(0,t.defineComponent)({name:"m-fields-link",props:{...go,config:{type:Object,required:!0}},emits:["change"],setup(e,{emit:o}){ho(e.prop);const n=(0,t.ref)({}),l=(0,t.ref)(),a=(0,t.inject)("mForm"),r=(0,t.computed)((()=>"function"===typeof e.config.href&&e.model?e.config.href(e.model):e.config.href||e.model?.[e.name])),i=()=>{n.value=e.model?.[e.name]||{}};return{formValue:n,editor:l,href:r,formConfig:(0,t.computed)((()=>"function"===typeof e.config.form?e.config.form(a,{model:e.model||{},values:e.values||{}}):e.config.form)),disable:(0,t.computed)((()=>"undefined"!==typeof e.config.disabled?e.config.disabled:!r.value)),displayText:(0,t.computed)((()=>"function"===typeof e.config.displayText?e.config.displayText(a,{model:e.model||{}}):e.config.displayText?e.config.displayText:"跳转")),init:i,editHandler:()=>{i(),l.value&&(l.value.dialogVisible=!0)},action:t=>{e.model&&(e.model[e.name]=t,n.value=t,o("change",e.model[e.name])),l.value&&(l.value.dialogVisible=!1)}}}}),Yo=["href"],Go={key:2,class:"m-fields-link"},Xo=(0,t.createTextVNode)("点击编辑");function Qo(e,o,n,l,a,r){const i=(0,t.resolveComponent)("el-button"),c=(0,t.resolveComponent)("m-form-dialog");return e.config.href&&!e.disabled?((0,t.openBlock)(),(0,t.createElementBlock)("a",{key:0,target:"_blank",href:e.href,style:(0,t.normalizeStyle)(e.config.css||{})},(0,t.toDisplayString)(e.displayText),13,Yo)):e.config.href&&e.disabled?((0,t.openBlock)(),(0,t.createElementBlock)("span",{key:1,style:(0,t.normalizeStyle)(e.config.disabledCss||{})},(0,t.toDisplayString)(e.displayText),5)):((0,t.openBlock)(),(0,t.createElementBlock)("div",Go,[(0,t.createVNode)(i,{text:"",type:"primary",onClick:e.editHandler},{default:(0,t.withCtx)((()=>[Xo])),_:1},8,["onClick"]),(0,t.createVNode)(c,{ref:"editor",title:e.config.formTitle||"编辑扩展配置",width:e.config.formWidth,values:e.formValue,config:e.formConfig,parentValues:e.values,fullscreen:e.config.fullscreen,onSubmit:e.action},null,8,["title","width","values","config","parentValues","fullscreen","onSubmit"])]))}var Jo=P(Ko,[["render",Qo]]);const en=(0,t.defineComponent)({name:"m-fields-number",props:{...go,config:{type:Object,required:!0}},emits:["change","input"],setup(e,{emit:o}){ho(e.prop);const n=(0,t.inject)("mForm");return{mForm:n,changeHandler:e=>{o("change",e)},inputHandler:t=>{o("input",t),n?.$emit("field-input",e.prop,t)}}}});function on(e,o,n,l,a,r){const i=(0,t.resolveComponent)("el-input-number");return e.model?((0,t.openBlock)(),(0,t.createBlock)(i,{key:0,modelValue:e.model[e.name],"onUpdate:modelValue":o[0]||(o[0]=o=>e.model[e.name]=o),clearable:"","controls-position":"right",size:e.size,max:e.config.max,min:e.config.min,step:e.config.step,placeholder:e.config.placeholder,disabled:e.disabled,onChange:e.changeHandler,onInput:e.inputHandler},null,8,["modelValue","size","max","min","step","placeholder","disabled","onChange","onInput"])):(0,t.createCommentVNode)("",!0)}var nn=P(en,[["render",on]]);const tn=(0,t.defineComponent)({name:"m-fields-radio-group",props:{...go,config:{type:Object,required:!0}},emits:["change"],setup(e,{emit:o}){return ho(e.prop),{changeHandler:e=>o("change",e)}}});function ln(e,o,n,l,a,r){const i=(0,t.resolveComponent)("el-radio"),c=(0,t.resolveComponent)("el-radio-group");return e.model?((0,t.openBlock)(),(0,t.createBlock)(c,{key:0,modelValue:e.model[e.name],"onUpdate:modelValue":o[0]||(o[0]=o=>e.model[e.name]=o),size:e.size,disabled:e.disabled,onChange:e.changeHandler},{default:(0,t.withCtx)((()=>[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.config.options,(e=>((0,t.openBlock)(),(0,t.createBlock)(i,{label:e.value,key:e.value},{default:(0,t.withCtx)((()=>[(0,t.createTextVNode)((0,t.toDisplayString)(e.text),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue","size","disabled","onChange"])):(0,t.createCommentVNode)("",!0)}var an=P(tn,[["render",ln]]);const rn=(0,t.defineComponent)({__name:"SelectOptionGroups",props:{options:null},setup(e){return(o,n)=>{const l=(0,t.resolveComponent)("el-option"),a=(0,t.resolveComponent)("el-option-group");return(0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.options,((e,o)=>((0,t.openBlock)(),(0,t.createBlock)(a,{key:o,label:e.label,disabled:e.disabled},{default:(0,t.withCtx)((()=>[((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.options,((e,o)=>((0,t.openBlock)(),(0,t.createBlock)(l,{key:o,label:e.label,value:e.value,disabled:e.disabled},null,8,["label","value","disabled"])))),128))])),_:2},1032,["label","disabled"])))),128)}}}),cn=(0,t.defineComponent)({__name:"SelectOptions",props:{options:null,valueKey:null},setup(e){return(o,n)=>{const l=(0,t.resolveComponent)("el-option");return(0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,null,(0,t.renderList)(e.options,(o=>((0,t.openBlock)(),(0,t.createBlock)(l,{label:o.text,value:o.value,key:e.valueKey?o.value[e.valueKey]:o.value,disabled:o.disabled},null,8,["label","value","disabled"])))),128)}}}),dn=(0,t.defineComponent)({name:"m-fields-select",components:{SelectOptions:cn,SelectOptionGroups:rn},props:{...go,config:{type:Object,required:!0}},emits:["change"],setup(e,{emit:o}){if(!e.model)throw new Error("不能没有model");ho(e.prop);const n=(0,t.ref)(),l=(0,t.inject)("mForm"),a=(0,t.ref)([]),r=(0,t.ref)([]),i=(0,t.ref)(!1),c=(0,t.ref)(!1),d=(0,t.ref)(0),m=(0,t.ref)(0),s=(0,t.ref)(20),p=(0,t.ref)(""),u=(0,t.ref)([]),f=(0,t.ref)(!0),g=(o,n)=>{if("object"===typeof n){const t=e.config.valueKey||"value";return n[t]===o[t]}return o===n},h=o=>{const{option:n}=e.config,{text:t}=n,{value:l}=n;return o.map((e=>({text:"function"===typeof t?t(e):e[t||"text"],value:"function"===typeof l?l(e):e[l||"value"]})))},v=async()=>{if(!e.model)return[];if(r.value.length)return r.value;i.value=!0;let o=[];const{config:n}=e,{option:t}=n;let{body:c}=t,f={method:t.method||"POST",url:t.url,cache:t.cache,timeout:t.timeout,mode:t.mode,headers:t.headers||{},json:t.json||!1};c&&("function"===typeof c&&(c=c(l,{model:e.model,formValue:l?.values,formValues:l?.values,config:e.config})),c.query=p.value,c.pgSize=s.value,c.pgIndex=m.value,f.data=c);const g=fo("request");"function"===typeof t.beforeRequest&&(f=t.beforeRequest(l,f,{model:e.model,formValue:l?.values})),"jsonp"===t.method?.toLocaleLowerCase()&&(f.jsonpCallback=t.jsonpCallback||"callback");let v=await g(f);"function"===typeof t.afterRequest&&(v=t.afterRequest(l,v,{model:e.model,formValue:l?.values,formValues:l?.values,config:e.config}));const y=v[t.root];v.total>0&&(d.value=v.total),u.value=u.value.concat(y),y&&("function"===typeof t.item?o=t.item(y):y.map&&(o=h(y))),i.value=!1;const b=[];return e.config.multiple&&e.model[e.name]&&a.value.forEach((n=>{const t=e.model?.[e.name].includes(n.value);t&&!o.find((e=>e.value===n.value))&&b.push(n)})),0===m.value?b.concat(o):a.value.concat(o)},y=async()=>{if(!e.model)return[];const o=e.model[e.name],{config:n}=e;return r.value=await v(),f.value=!1,n.group?n.multiple&&o.findIndex?r.value.filter((e=>e.options.findIndex((e=>o.find((o=>g(e.value,o)))>-1))>-1)):r.value.filter((e=>e.options.findIndex((e=>g(e.value,o)))>-1)):n.multiple&&o.findIndex?r.value.filter((e=>o.findIndex((o=>g(e.value,o)))>-1)):r.value.filter((e=>g(e.value,o)))},b=async()=>{if(!e.model)return[];const{config:o}=e,{option:n}=o;let t=[],a=n.initUrl;if(!a)return y();"function"===typeof a&&(a=await a(l,{model:e.model,formValue:l?.values}));const r={method:n.method||"POST",url:a,data:{id:e.model[e.name]},mode:n.mode,headers:n.headers||{},json:n.json||!1};"jsonp"===n.method?.toLocaleLowerCase()&&(r.jsonpCallback=n.jsonpCallback||"callback");const i=fo("request"),c=await i(r);let d=c[n.root];return d&&(Array.isArray(d)||(d=[d]),"function"===typeof n.item?t=n.item(d):d.map&&(t=h(d))),t};return"function"===typeof e.config.options?(0,t.watch)((()=>l?.values),(()=>{"function"===typeof e.config.options&&Promise.resolve(e.config.options(l,{model:e.model,prop:e.prop,formValues:l?.values,formValue:l?.values,config:e.config})).then((e=>{a.value=e}))}),{deep:!0,immediate:!0}):Array.isArray(e.config.options)?(0,t.watch)((()=>e.config.options),(()=>{a.value=e.config.options}),{immediate:!0}):e.config.option&&(0,t.onBeforeMount)((()=>{if(!e.model)return;const o=e.model[e.name];(Array.isArray(o)?o.length:o)&&b().then((e=>{a.value=e}))})),e.config.remote&&(0,t.onMounted)((()=>{n.value?.scrollbar.wrap$.addEventListener("scroll",(async e=>{const o=e.currentTarget;c.value||o.scrollHeight-o.clientHeight-o.scrollTop>1||d.value<=a.value.length||(c.value=!0,m.value+=1,a.value=await v(),c.value=!1)}))})),{select:n,loading:i,remote:f,options:a,groupOptions:a,moreLoadingVisible:c,popperClass:l?.popperClass,getOptions:v,getRequestFuc(){return fo("request")},changeHandler(e){o("change",e)},async visibleHandler(o){o&&e.config.remote&&(p.value&&n.value?(n.value.query=p.value,n.value.previousQuery=p.value,n.value.selectedLabel=p.value):a.value.length<=(e.config.multiple?e.model?.[e.name].length:1)&&(a.value=await v()))},async remoteMethod(o){r.value.length||(p.value=o,m.value=0,a.value=await v(),e.config.multiple&&setTimeout((()=>{n.value?.setSelected()}),0))}}}}),mn={key:2};function sn(e,o,n,l,a,r){const i=(0,t.resolveComponent)("select-option-groups"),c=(0,t.resolveComponent)("select-options"),d=(0,t.resolveComponent)("el-select"),m=(0,t.resolveDirective)("loading");return e.model?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createBlock)(d,{key:0,modelValue:e.model[e.name],"onUpdate:modelValue":o[0]||(o[0]=o=>e.model[e.name]=o),class:"m-select",ref:"select",clearable:"",filterable:"","popper-class":`m-select-popper ${e.popperClass}`,size:e.size,remote:e.remote,placeholder:e.config.placeholder,multiple:e.config.multiple,"value-key":e.config.valueKey||"value","allow-create":e.config.allowCreate,disabled:e.disabled,"remote-method":e.config.remote&&e.remoteMethod,onChange:e.changeHandler,onVisibleChange:e.visibleHandler},{default:(0,t.withCtx)((()=>[e.config.group?((0,t.openBlock)(),(0,t.createBlock)(i,{key:0,options:e.groupOptions},null,8,["options"])):((0,t.openBlock)(),(0,t.createBlock)(c,{key:1,options:e.options},null,8,["options"])),e.moreLoadingVisible?(0,t.withDirectives)(((0,t.openBlock)(),(0,t.createElementBlock)("div",mn,null,512)),[[m,!0]]):(0,t.createCommentVNode)("",!0)])),_:1},8,["modelValue","popper-class","size","remote","placeholder","multiple","value-key","allow-create","disabled","remote-method","onChange","onVisibleChange"])),[[m,e.loading]]):(0,t.createCommentVNode)("",!0)}var pn=P(dn,[["render",sn]]);const un=(0,t.defineComponent)({name:"m-fields-switch",props:{...go,config:{type:Object,required:!0}},emits:["change"],setup(e,{emit:o}){return ho(e.prop),{n:(0,t.computed)((()=>e.name||e.config.name||"")),activeValue:(0,t.computed)((()=>"undefined"!==typeof e.config.activeValue?e.config.activeValue:"number"!==e.config.filter||1)),inactiveValue:(0,t.computed)((()=>"undefined"!==typeof e.config.inactiveValue?e.config.inactiveValue:"number"===e.config.filter&&0)),changeHandler:e=>{o("change",e)}}}});function fn(e,o,n,l,a,r){const i=(0,t.resolveComponent)("el-switch");return e.model?((0,t.openBlock)(),(0,t.createBlock)(i,{key:0,modelValue:e.model[e.n],"onUpdate:modelValue":o[0]||(o[0]=o=>e.model[e.n]=o),size:e.size,activeValue:e.activeValue,inactiveValue:e.inactiveValue,disabled:e.disabled,onChange:e.changeHandler},null,8,["modelValue","size","activeValue","inactiveValue","disabled","onChange"])):(0,t.createCommentVNode)("",!0)}var gn=P(un,[["render",fn]]);const hn=(0,t.defineComponent)({name:"m-fields-text",props:{...go,config:{type:Object,required:!0}},emits:["change","input"],setup(e,{emit:o}){const n=(0,t.inject)("mForm");ho(e.prop);const l=(0,t.computed)((()=>e.name||e.config.name||""));return{modelName:l,changeHandler(e){o("change",e)},inputHandler(t){o("input",t),n?.$emit("field-input",e.prop,t)},buttonClickHandler(){"string"!==typeof e.config.append&&e.config.append?.handler&&e.config.append.handler(n,{model:e.model,values:n?.values})},keyUpHandler(n){if(!e.model)return;if(!l.value)return;const t="ArrowUp"===n.key,a="ArrowDown"===n.key;if(!t&&!a)return;const r=e.model[l.value];let i,c;if(/^([0-9.]+)$/.test(r)?i=+r:r.replace(/^([0-9.]+)([a-z%]+)$/,((e,o,n)=>{i=+o,c=n})),void 0===i)return;const d=navigator.platform.match("Mac")?n.metaKey:n.ctrlKey,m=n.shiftKey,s=n.altKey;t?d?i+=100:s?i=(1e4*i+1e3)/1e4:i+=m?10:1:a&&(d?i-=100:s?i=(1e4*i-1e3)/1e4:i-=m?10:1),e.model[l.value]=`${i}${c||""}`,o("change",e.model[l.value])}}}}),vn={key:0};function yn(e,o,n,l,a,r){const i=(0,t.resolveComponent)("el-button"),c=(0,t.resolveComponent)("el-input");return(0,t.openBlock)(),(0,t.createBlock)(c,{modelValue:e.model[e.modelName],"onUpdate:modelValue":o[0]||(o[0]=o=>e.model[e.modelName]=o),clearable:"",size:e.size,placeholder:e.config.placeholder,disabled:e.disabled,onChange:e.changeHandler,onInput:e.inputHandler,onKeyup:o[1]||(o[1]=o=>e.keyUpHandler(o))},(0,t.createSlots)({_:2},[e.config.append?{name:"append",fn:(0,t.withCtx)((()=>["string"===typeof e.config.append?((0,t.openBlock)(),(0,t.createElementBlock)("span",vn,(0,t.toDisplayString)(e.config.append),1)):(0,t.createCommentVNode)("",!0),"object"===typeof e.config.append&&"button"===e.config.append.type?((0,t.openBlock)(),(0,t.createBlock)(i,{key:1,style:{color:"#409eff"},size:e.size,onClick:(0,t.withModifiers)(e.buttonClickHandler,["prevent"])},{default:(0,t.withCtx)((()=>[(0,t.createTextVNode)((0,t.toDisplayString)(e.config.append.text),1)])),_:1},8,["size","onClick"])):(0,t.createCommentVNode)("",!0)]))}:void 0]),1032,["modelValue","size","placeholder","disabled","onChange","onInput"])}var bn=P(hn,[["render",yn]]);const kn=(0,t.defineComponent)({name:"m-fields-textarea",props:{...go,config:{type:Object,required:!0}},emits:{change(e){return e},input(e){return e}},setup(e,{emit:o}){ho(e.prop);const n=(0,t.inject)("mForm");return{mForm:n,changeHandler:e=>{o("change",e)},inputHandler:t=>{o("input",t),n?.$emit("field-input",e.prop,t)}}}});function Cn(e,o,n,l,a,r){const i=(0,t.resolveComponent)("el-input");return(0,t.openBlock)(),(0,t.createBlock)(i,{modelValue:e.model[e.name],"onUpdate:modelValue":o[0]||(o[0]=o=>e.model[e.name]=o),type:"textarea",size:e.size,clearable:"",placeholder:e.config.placeholder,disabled:e.disabled,onChange:e.changeHandler,onInput:e.inputHandler},null,8,["modelValue","size","placeholder","disabled","onChange","onInput"])}var xn=P(kn,[["render",Cn]]);const Vn=(0,t.defineComponent)({name:"m-fields-time",props:{...go,config:{type:Object,required:!0}},emits:{change(e){return e}},setup(e,{emit:o}){return ho(e.prop),{changeHandler:e=>{o("change",e)}}}});function Bn(e,o,n,l,a,r){const i=(0,t.resolveComponent)("el-time-picker");return(0,t.openBlock)(),(0,t.createBlock)(i,{modelValue:e.model[e.name],"onUpdate:modelValue":o[0]||(o[0]=o=>e.model[e.name]=o),size:e.size,"value-format":"HH:mm:ss",placeholder:e.config.placeholder,disabled:e.disabled,onChange:e.changeHandler},null,8,["modelValue","size","placeholder","disabled","onChange"])}var wn=P(Vn,[["render",Bn]]);const _n=(0,t.defineComponent)({name:"m-form",props:{initValues:{type:Object,required:!0,default:()=>({})},parentValues:{type:Object,default:()=>({})},config:{type:Array,required:!0,default:()=>[]},labelWidth:{type:String,default:()=>"200px"},disabled:{type:Boolean,default:()=>!1},height:{type:String,default:()=>"auto"},stepActive:{type:[String,Number],default:()=>1},size:{type:String},inline:{type:Boolean,default:!1},labelPosition:{type:String,default:"right"},keyProp:{type:String,default:"__key"},popperClass:{type:String}},emits:["change","field-input","field-change"],setup(e,{emit:o}){const n=(0,t.ref)(),l=(0,t.ref)(!1),a=(0,t.ref)({}),r=new Map,i=fo("request"),c=(0,t.reactive)({keyProp:e.keyProp,popperClass:e.popperClass,config:e.config,initValues:e.initValues,parentValues:e.parentValues,values:a,$emit:o,fields:r,setField:(e,o)=>r.set(e,o),getField:e=>r.get(e),deleteField:e=>r.delete(e),post:e=>{if(i)return i({...e,method:"POST"})}});return(0,t.provide)("mForm",c),(0,t.watch)([()=>e.config,()=>e.initValues],(([o],[n])=>{(0,N.Z)((0,t.toRaw)(o),(0,t.toRaw)(n))||(l.value=!1),q(c,{initValues:e.initValues,config:e.config}).then((e=>{a.value=e,l.value=!0}))}),{immediate:!0}),{initialized:l,values:a,elForm:n,formState:c,changeHandler:()=>{o("change",a.value)},resetForm:()=>n.value?.resetFields(),submitForm:async e=>{try{return await(n.value?.validate()),e?a.value:(0,z.Z)((0,t.toRaw)(a.value))}catch(o){const e=[];throw Object.entries(o).forEach((([,o])=>{o.forEach((({field:o,message:n})=>{o&&n&&e.push(`${o} -> ${n}`),o&&!n&&e.push(`${o} -> 出现错误`),!o&&n&&e.push(`${n}`)}))})),new Error(e.join("<br>"))}}}}});function En(e,o,n,l,a,r){const i=(0,t.resolveComponent)("m-form-container"),c=(0,t.resolveComponent)("el-form");return(0,t.openBlock)(),(0,t.createBlock)(c,{class:"m-form",ref:"elForm",model:e.values,"label-width":e.labelWidth,disabled:e.disabled,style:(0,t.normalizeStyle)(`height: ${e.height}`),inline:e.inline,"label-position":e.labelPosition},{default:(0,t.withCtx)((()=>[e.initialized&&Array.isArray(e.config)?((0,t.openBlock)(!0),(0,t.createElementBlock)(t.Fragment,{key:0},(0,t.renderList)(e.config,((o,n)=>((0,t.openBlock)(),(0,t.createBlock)(i,{key:o[e.keyProp]??n,config:o,model:e.values,"label-width":o.labelWidth||e.labelWidth,"step-active":e.stepActive,size:e.size,onChange:e.changeHandler},null,8,["config","model","label-width","step-active","size","onChange"])))),128)):(0,t.createCommentVNode)("",!0)])),_:1},8,["model","label-width","disabled","style","inline","label-position"])}var zn=P(_n,[["render",En]]);const Nn=(0,t.defineComponent)({name:"m-form-dialog",props:{values:{type:Object,default:()=>({})},width:[Number,String],fullscreen:Boolean,title:String,config:{type:Array,required:!0,default:()=>[]},labelWidth:[Number,String],size:String,confirmText:{type:String,default:"确定"}},emits:["close","submit","error","change"],setup(e,{emit:o}){const n=(0,t.ref)(),l=(0,t.ref)(!1),a=(0,t.ref)(!1),r=(0,t.ref)(1),i=(0,t.ref)(document.body.clientHeight-194+"px"),c=(0,t.computed)((()=>{const{length:o}=e.config;for(let n=0;n<o;n++)if("step"===e.config[n].type)return e.config[n].items.length;return 0})),d=(0,t.computed)((()=>{const{length:o}=e.config;for(let n=0;n<o;n++)if("step"===e.config[n].type)return!0;return!1})),m=()=>{l.value=!1},s=()=>{r.value=1,o("close")},p=async()=>{try{const e=await(n.value?.submitForm());o("submit",e)}catch(e){o("error",e)}},u=()=>{r.value-=1},f=()=>{r.value+=1},g=e=>{o("change",e)};return{form:n,saveFetch:a,stepActive:r,dialogVisible:l,bodyHeight:i,stepCount:c,hasStep:d,cancel:m,closeHandler:s,save:p,preStep:u,nextStep:f,changeHandler:g}}}),Sn={style:{"min-height":"1px"}},Hn=(0,t.createTextVNode)("取 消"),Tn=(0,t.createTextVNode)("上一步"),Mn=(0,t.createTextVNode)("下一步");function An(e,o,n,l,a,r){const i=(0,t.resolveComponent)("m-form"),c=(0,t.resolveComponent)("el-col"),d=(0,t.resolveComponent)("el-button"),m=(0,t.resolveComponent)("el-row"),s=(0,t.resolveComponent)("el-dialog");return(0,t.openBlock)(),(0,t.createElementBlock)("div",null,[(0,t.createVNode)(s,{modelValue:e.dialogVisible,"onUpdate:modelValue":o[1]||(o[1]=o=>e.dialogVisible=o),"custom-class":"m-form-dialog",top:"20px",title:e.title,appendToBody:!0,width:e.width,fullscreen:e.fullscreen,"close-on-click-modal":!1,onClose:e.closeHandler},{footer:(0,t.withCtx)((()=>[(0,t.createVNode)(m,{class:"dialog-footer"},{default:(0,t.withCtx)((()=>[(0,t.createVNode)(c,{span:12,style:{"text-align":"left"}},{default:(0,t.withCtx)((()=>[(0,t.createElementVNode)("div",Sn,[(0,t.renderSlot)(e.$slots,"left")])])),_:3}),(0,t.createVNode)(c,{span:12},{default:(0,t.withCtx)((()=>[(0,t.renderSlot)(e.$slots,"footer",{},(()=>[(0,t.createVNode)(d,{onClick:e.cancel,size:"small"},{default:(0,t.withCtx)((()=>[Hn])),_:1},8,["onClick"]),e.hasStep&&e.stepActive>1?((0,t.openBlock)(),(0,t.createBlock)(d,{key:0,type:"info",size:"small",onClick:e.preStep},{default:(0,t.withCtx)((()=>[Tn])),_:1},8,["onClick"])):(0,t.createCommentVNode)("",!0),e.hasStep&&e.stepCount>e.stepActive?((0,t.openBlock)(),(0,t.createBlock)(d,{key:1,type:"info",size:"small",onClick:e.nextStep},{default:(0,t.withCtx)((()=>[Mn])),_:1},8,["onClick"])):((0,t.openBlock)(),(0,t.createBlock)(d,{key:2,type:"primary",size:"small",loading:e.saveFetch,onClick:e.save},{default:(0,t.withCtx)((()=>[(0,t.createTextVNode)((0,t.toDisplayString)(e.confirmText),1)])),_:1},8,["loading","onClick"]))]))])),_:3})])),_:3})])),default:(0,t.withCtx)((()=>[(0,t.createElementVNode)("div",{class:"m-dialog-body",style:(0,t.normalizeStyle)(`max-height: ${e.bodyHeight}; overflow-y: auto; overflow-x: hidden;`)},[(0,t.createVNode)(i,{modelValue:e.stepActive,"onUpdate:modelValue":o[0]||(o[0]=o=>e.stepActive=o),ref:"form",size:e.size,config:e.config,"init-values":e.values,"label-width":e.labelWidth,onChange:e.changeHandler},null,8,["modelValue","size","config","init-values","label-width","onChange"]),(0,t.renderSlot)(e.$slots,"default")],4)])),_:3},8,["modelValue","title","width","fullscreen","onClose"])])}var jn=P(Nn,[["render",An]]);const Fn={},Ln=(e,o)=>{const n=Object.assign(Fn,o);e.config.globalProperties.$MAGIC_FORM=n,uo(n),e.component(zn.name,zn),e.component(jn.name,jn),e.component(ee.name,ee),e.component("m-form-fieldset",de),e.component(_e.name,_e),e.component(Ae.name,Ae),e.component(De.name,De),e.component(We.name,We),e.component(lo.name,lo),e.component(so.name,so),e.component(bn.name,bn),e.component(nn.name,nn),e.component(xn.name,xn),e.component(Uo.name,Uo),e.component(To.name,To),e.component(Oo.name,Oo),e.component(wn.name,wn),e.component(Vo.name,Vo),e.component(gn.name,gn),e.component(jo.name,jo),e.component(No.name,No),e.component(_o.name,_o),e.component(an.name,an),e.component(Io.name,Io),e.component(Jo.name,Jo),e.component(pn.name,pn),e.component(ko.name,ko),e.component(qo.name,qo)};var On={install:Ln}},65896:function(e,o,n){"use strict";n.d(o,{Z:function(){return m}});var t=n(89350),l="__lodash_hash_undefined__";function a(e){return this.__data__.set(e,l),this}var r=a;function i(e){return this.__data__.has(e)}var c=i;function d(e){var o=-1,n=null==e?0:e.length;this.__data__=new t.Z;while(++o<n)this.add(e[o])}d.prototype.add=d.prototype.push=r,d.prototype.has=c;var m=d},18876:function(e,o,n){"use strict";n.d(o,{Z:function(){return oe}});var t=n(82157),l=n(65896);function a(e,o){var n=-1,t=null==e?0:e.length;while(++n<t)if(o(e[n],n,e))return!0;return!1}var r=a,i=n(27121),c=1,d=2;function m(e,o,n,t,a,m){var s=n&c,p=e.length,u=o.length;if(p!=u&&!(s&&u>p))return!1;var f=m.get(e),g=m.get(o);if(f&&g)return f==o&&g==e;var h=-1,v=!0,y=n&d?new l.Z:void 0;m.set(e,o),m.set(o,e);while(++h<p){var b=e[h],k=o[h];if(t)var C=s?t(k,b,h,o,e,m):t(b,k,h,e,o,m);if(void 0!==C){if(C)continue;v=!1;break}if(y){if(!r(o,(function(e,o){if(!(0,i.Z)(y,o)&&(b===e||a(b,e,n,t,m)))return y.push(o)}))){v=!1;break}}else if(b!==k&&!a(b,k,n,t,m)){v=!1;break}}return m["delete"](e),m["delete"](o),v}var s=m,p=n(17401),u=n(11099),f=n(30202);function g(e){var o=-1,n=Array(e.size);return e.forEach((function(e,t){n[++o]=[t,e]})),n}var h=g,v=n(56902),y=1,b=2,k="[object Boolean]",C="[object Date]",x="[object Error]",V="[object Map]",B="[object Number]",w="[object RegExp]",_="[object Set]",E="[object String]",z="[object Symbol]",N="[object ArrayBuffer]",S="[object DataView]",H=p.Z?p.Z.prototype:void 0,T=H?H.valueOf:void 0;function M(e,o,n,t,l,a,r){switch(n){case S:if(e.byteLength!=o.byteLength||e.byteOffset!=o.byteOffset)return!1;e=e.buffer,o=o.buffer;case N:return!(e.byteLength!=o.byteLength||!a(new u.Z(e),new u.Z(o)));case k:case C:case B:return(0,f.Z)(+e,+o);case x:return e.name==o.name&&e.message==o.message;case w:case E:return e==o+"";case V:var i=h;case _:var c=t&y;if(i||(i=v.Z),e.size!=o.size&&!c)return!1;var d=r.get(e);if(d)return d==o;t|=b,r.set(e,o);var m=s(i(e),i(o),t,l,a,r);return r["delete"](e),m;case z:if(T)return T.call(e)==T.call(o)}return!1}var A=M,j=n(25666),F=1,L=Object.prototype,O=L.hasOwnProperty;function R(e,o,n,t,l,a){var r=n&F,i=(0,j.Z)(e),c=i.length,d=(0,j.Z)(o),m=d.length;if(c!=m&&!r)return!1;var s=c;while(s--){var p=i[s];if(!(r?p in o:O.call(o,p)))return!1}var u=a.get(e),f=a.get(o);if(u&&f)return u==o&&f==e;var g=!0;a.set(e,o),a.set(o,e);var h=r;while(++s<c){p=i[s];var v=e[p],y=o[p];if(t)var b=r?t(y,v,p,o,e,a):t(v,y,p,e,o,a);if(!(void 0===b?v===y||l(v,y,n,t,a):b)){g=!1;break}h||(h="constructor"==p)}if(g&&!h){var k=e.constructor,C=o.constructor;k==C||!("constructor"in e)||!("constructor"in o)||"function"==typeof k&&k instanceof k&&"function"==typeof C&&C instanceof C||(g=!1)}return a["delete"](e),a["delete"](o),g}var D=R,I=n(71880),$=n(57933),W=n(76963),Z=n(60976),q=1,P="[object Arguments]",U="[object Array]",K="[object Object]",Y=Object.prototype,G=Y.hasOwnProperty;function X(e,o,n,l,a,r){var i=(0,$.Z)(e),c=(0,$.Z)(o),d=i?U:(0,I.Z)(e),m=c?U:(0,I.Z)(o);d=d==P?K:d,m=m==P?K:m;var p=d==K,u=m==K,f=d==m;if(f&&(0,W.Z)(e)){if(!(0,W.Z)(o))return!1;i=!0,p=!1}if(f&&!p)return r||(r=new t.Z),i||(0,Z.Z)(e)?s(e,o,n,l,a,r):A(e,o,d,n,l,a,r);if(!(n&q)){var g=p&&G.call(e,"__wrapped__"),h=u&&G.call(o,"__wrapped__");if(g||h){var v=g?e.value():e,y=h?o.value():o;return r||(r=new t.Z),a(v,y,n,l,r)}}return!!f&&(r||(r=new t.Z),D(e,o,n,l,a,r))}var Q=X,J=n(13835);function ee(e,o,n,t,l){return e===o||(null==e||null==o||!(0,J.Z)(e)&&!(0,J.Z)(o)?e!==e&&o!==o:Q(e,o,n,t,ee,l))}var oe=ee},27121:function(e,o){"use strict";function n(e,o){return e.has(o)}o["Z"]=n},27652:function(e,o,n){"use strict";var t=n(95236),l=(0,t.Z)(Object.getPrototypeOf,Object);o["Z"]=l},56902:function(e,o){"use strict";function n(e){var o=-1,n=Array(e.size);return e.forEach((function(e){n[++o]=e})),n}o["Z"]=n},26468:function(e,o,n){"use strict";var t=n(60883),l=1,a=4;function r(e){return(0,t.Z)(e,l|a)}o["Z"]=r},64205:function(e,o,n){"use strict";var t=n(18876);function l(e,o){return(0,t.Z)(e,o)}o["Z"]=l}}]);