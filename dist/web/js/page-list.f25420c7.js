"use strict";(self["webpackChunkonline_conplier"]=self["webpackChunkonline_conplier"]||[]).push([[569],{53920:function(e,t,a){a(27515)},6566:function(e,t,a){a(27515),a(26),a(81830)},24348:function(e,t,a){a(27515),a(24535)},1350:function(e,t,a){a(27515)},34229:function(e,t,a){a(27515),a(53920)},64339:function(e,t,a){a(27515),a(24535)},79313:function(e,t,a){a(27515),a(24535),a(53920),a(8710),a(16938),a(79643),a(34229),a(81830),a(24348)},10525:function(e,t,a){a.d(t,{CT:function(){return o},Jq:function(){return u},fX:function(){return i},fx:function(){return l}});var n=a(51435),r=a(15941);async function u(e){const t=await n.db.pages.where("key").equalsIgnoreCase(e.key).count();if(!e.id&&t>0)throw"key已存在，请修改";const a={...e,createTime:e.createTime||(new Date).getTime(),updateTime:(new Date).getTime()};r.log(e);const u=await n.db.pages.put(a,a.id);return u}async function i(){const e=await n.db.pages.reverse().sortBy("updateTime");return e}async function l(e){const t=await n.db.pages.get(+e);return r.log(t),t}async function o(e){await n.db.pages["delete"](e)}},25988:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});a(79313);var n=a(84537),r=(a(24348),a(68626)),u=(a(6566),a(99332)),i=(a(64339),a(48856)),l=(a(37173),a(86013)),o=(a(24535),a(74246)),c=(a(1350),a(10252)),d=a(10311),f=a(22483),s=a(28934),m=a(10525),p=a(55743),y=a.n(p),k=a(15941);const v={class:"filter-wrap"},w=(0,d.createTextVNode)("搜索"),x=(0,d.createTextVNode)("重置"),N={class:"operation-wrap"},V=(0,d.createTextVNode)("新增"),T={class:"table-wrap"};var C={__name:"index",setup(e){const t=(0,f.tv)(),a=(0,d.ref)([]),p=(0,d.ref)(a.value),C=()=>{p.value=a.value.filter((e=>e.name.indexOf(b.name)>-1&&e.key.indexOf(b.key)-1))},g=()=>{b.name="",b.key="",p.value=a.value},h=async()=>{const e=await(0,m.fX)();a.value=e.map((e=>({...e,createTime:y()(+e.createTime).format("YYYY-MM-DD HH:mm:ss"),updateTime:y()(+e.updateTime).format("YYYY-MM-DD HH:mm:ss")}))),C()},Z=()=>t.push({name:"pageEditor"}),_=async e=>{await(0,m.CT)(e),h(),c.ZP.success({content:"删除成功",duration:3})},b=(0,d.reactive)({name:"",key:""}),I=(0,d.ref)([{title:"名称",dataIndex:"name",key:"name"},{title:"key",dataIndex:"key",key:"key"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"最后更新时间",dataIndex:"updateTime",key:"updateTime"},{title:"操作",dataIndex:"action",customRender:({record:e})=>(0,d.createVNode)(d.Fragment,null,[(0,d.createVNode)(o.Z,{size:"small",type:"link",onClick:()=>t.push({name:"pageEditor",params:{id:e.id}})},{default:()=>[(0,d.createTextVNode)("编辑")]}),(0,d.createVNode)(l.Z,{type:"vertical"},null),(0,d.createVNode)(i.Z,{title:"确认删除此组件？",okText:"确认",cancelText:"取消",onConfirm:()=>_(e.id)},{default:()=>[(0,d.createVNode)(o.Z,{size:"small",type:"link",onClick:()=>k.log(e)},{default:()=>[(0,d.createTextVNode)("删除")]})]})])}]);return(0,d.onMounted)((()=>{h()})),(e,t)=>((0,d.openBlock)(),(0,d.createBlock)((0,d.unref)(s.PageContainer),null,{default:(0,d.withCtx)((()=>[(0,d.createElementVNode)("div",v,[(0,d.createVNode)((0,d.unref)(u.ZP),{layout:"inline",model:b},{default:(0,d.withCtx)((()=>[(0,d.createVNode)((0,d.unref)(u.ZP).Item,{label:"页面名称",name:"name"},{default:(0,d.withCtx)((()=>[(0,d.createVNode)((0,d.unref)(r.ZP),{value:b.name,"onUpdate:value":t[0]||(t[0]=e=>b.name=e)},null,8,["value"])])),_:1}),(0,d.createVNode)((0,d.unref)(u.ZP).Item,{label:"页面key",name:"key"},{default:(0,d.withCtx)((()=>[(0,d.createVNode)((0,d.unref)(r.ZP),{value:b.key,"onUpdate:value":t[1]||(t[1]=e=>b.key=e)},null,8,["value"])])),_:1}),(0,d.createVNode)((0,d.unref)(u.ZP).Item,null,{default:(0,d.withCtx)((()=>[(0,d.createVNode)((0,d.unref)(o.Z),{type:"primary",onClick:C},{default:(0,d.withCtx)((()=>[w])),_:1})])),_:1}),(0,d.createVNode)((0,d.unref)(u.ZP).Item,null,{default:(0,d.withCtx)((()=>[(0,d.createVNode)((0,d.unref)(o.Z),{onClick:g},{default:(0,d.withCtx)((()=>[x])),_:1})])),_:1})])),_:1},8,["model"])]),(0,d.createElementVNode)("div",N,[(0,d.createVNode)((0,d.unref)(o.Z),{type:"primary",onClick:Z},{default:(0,d.withCtx)((()=>[V])),_:1})]),(0,d.createElementVNode)("div",T,[(0,d.createVNode)((0,d.unref)(n.ZP),{class:"table",dataSource:p.value,columns:I.value,size:"middle"},null,8,["dataSource","columns"])])])),_:1}))}};const g=C;var h=g}}]);
//# sourceMappingURL=page-list.f25420c7.js.map