"use strict";(self["webpackChunkonline_conplier"]=self["webpackChunkonline_conplier"]||[]).push([[225],{74767:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var n={};a.r(n),a.d(n,{y9:function(){return k}});a(20867);var l=a(54124),r=(a(24348),a(50278)),d=(a(6566),a(57848)),u=(a(64339),a(65735)),i=(a(37173),a(86013)),o=(a(24535),a(5676)),c=(a(1350),a(83438)),m=a(10311),s=a(22483),f=a(47932),p=a(51435);a(15941);async function k(){const e=await p.db.libs.reverse().sortBy("updateTime");return e}var y=a(55743),v=a.n(y),x=a(15941);const N={class:"filter-wrap"},V=(0,m.createTextVNode)("搜索"),w=(0,m.createTextVNode)("重置"),C={class:"operation-wrap"},T=(0,m.createTextVNode)("新增"),Z={class:"table-wrap"};var h={__name:"index",setup(e){const t=(0,s.tv)(),a=(0,m.ref)([]),p=(0,m.ref)(a.value),y=()=>{p.value=a.value.filter((e=>e.name.indexOf(P.name)>-1&&e.key.indexOf(P.key)-1))},h=()=>p.value=a.value,_=async()=>{const e=await k();a.value=e.map((e=>({...e,createTime:v()(+e.createTime).format("YYYY-MM-DD HH:mm:ss"),updateTime:v()(+e.updateTime).format("YYYY-MM-DD HH:mm:ss")}))),y()},b=()=>t.push({name:"editor"}),I=async e=>{await(0,n.deleteLib)(e),_(),c.ZP.success({content:"删除成功",duration:3})},P=(0,m.reactive)({name:"",key:""}),Y=(0,m.ref)([{title:"名称",dataIndex:"name",key:"name"},{title:"key",dataIndex:"key",key:"key"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"最后更新时间",dataIndex:"updateTime",key:"updateTime"},{title:"操作",dataIndex:"action",customRender:({record:e})=>(0,m.createVNode)(m.Fragment,null,[(0,m.createVNode)(o.Z,{size:"small",type:"link",onClick:()=>t.push({name:"editor",params:{id:e.id}})},{default:()=>[(0,m.createTextVNode)("编辑")]}),(0,m.createVNode)(i.Z,{type:"vertical"},null),(0,m.createVNode)(u.Z,{title:"确认删除此组件？",okText:"确认",cancelText:"取消",onConfirm:()=>I(e.id)},{default:()=>[(0,m.createVNode)(o.Z,{size:"small",type:"link",onClick:()=>x.log(e)},{default:()=>[(0,m.createTextVNode)("删除")]})]})])}]);return(0,m.onMounted)((()=>{_()})),(e,t)=>((0,m.openBlock)(),(0,m.createBlock)((0,m.unref)(f._z),null,{default:(0,m.withCtx)((()=>[(0,m.createElementVNode)("div",N,[(0,m.createVNode)((0,m.unref)(d.ZP),{layout:"inline",model:P},{default:(0,m.withCtx)((()=>[(0,m.createVNode)((0,m.unref)(d.ZP).Item,{label:"库名称",name:"name"},{default:(0,m.withCtx)((()=>[(0,m.createVNode)((0,m.unref)(r.ZP),{value:P.name,"onUpdate:value":t[0]||(t[0]=e=>P.name=e)},null,8,["value"])])),_:1}),(0,m.createVNode)((0,m.unref)(d.ZP).Item,{label:"库key",name:"key"},{default:(0,m.withCtx)((()=>[(0,m.createVNode)((0,m.unref)(r.ZP),{value:P.key,"onUpdate:value":t[1]||(t[1]=e=>P.key=e)},null,8,["value"])])),_:1}),(0,m.createVNode)((0,m.unref)(d.ZP).Item,null,{default:(0,m.withCtx)((()=>[(0,m.createVNode)((0,m.unref)(o.Z),{type:"primary",onClick:y},{default:(0,m.withCtx)((()=>[V])),_:1})])),_:1}),(0,m.createVNode)((0,m.unref)(d.ZP).Item,null,{default:(0,m.withCtx)((()=>[(0,m.createVNode)((0,m.unref)(o.Z),{onClick:h},{default:(0,m.withCtx)((()=>[w])),_:1})])),_:1})])),_:1},8,["model"])]),(0,m.createElementVNode)("div",C,[(0,m.createVNode)((0,m.unref)(o.Z),{type:"primary",onClick:b},{default:(0,m.withCtx)((()=>[T])),_:1})]),(0,m.createElementVNode)("div",Z,[(0,m.createVNode)((0,m.unref)(l.ZP),{class:"table",dataSource:p.value,columns:Y.value,size:"middle"},null,8,["dataSource","columns"])])])),_:1}))}};const _=h;var b=_}}]);
//# sourceMappingURL=lib-list.fc685804.js.map