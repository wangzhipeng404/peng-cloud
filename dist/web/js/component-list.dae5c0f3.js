"use strict";(self["webpackChunkonline_conplier"]=self["webpackChunkonline_conplier"]||[]).push([[779,583],{53920:function(e,t,n){n(27515)},6566:function(e,t,n){n(27515),n(26),n(81830)},24348:function(e,t,n){n(27515),n(24535)},1350:function(e,t,n){n(27515)},34229:function(e,t,n){n(27515),n(53920)},64339:function(e,t,n){n(27515),n(24535)},79313:function(e,t,n){n(27515),n(24535),n(53920),n(8710),n(16938),n(79643),n(34229),n(81830),n(24348)},29583:function(e,t,n){n.r(t),n.d(t,{deleteComponet:function(){return u},findComponents:function(){return c},getComponet:function(){return i},saveComponent:function(){return r}});var a=n(51435),o=n(15941);async function r(e){const t=await a.db.components.where("key").equalsIgnoreCase(e.key).count();if(!e.id&&t>0)throw"组件key已存在，请修改";const n={...e,createTime:e.createTime||(new Date).getTime(),updateTime:(new Date).getTime()};o.log(e);const r=await a.db.components.put(n,n.id);return r}async function c(){const e=await a.db.components.reverse().sortBy("updateTime");return e}async function i(e){const t=await a.db.components.get(+e);return o.log(t),t}async function u(e){await a.db.components["delete"](e)}},26512:function(e,t,n){n.r(t),n.d(t,{default:function(){return _}});n(79313);var a=n(84537),o=(n(24348),n(68626)),r=(n(6566),n(99332)),c=(n(64339),n(48856)),i=(n(37173),n(86013)),u=(n(24535),n(74246)),l=(n(1350),n(10252)),d=n(10311),m=n(22483),s=n(28934),f=n(29583),p=n(55743),y=n.n(p),k=n(24887),v=n(15941);const C={class:"filter-wrap"},w=(0,d.createTextVNode)("搜索"),x=(0,d.createTextVNode)("重置"),N={class:"operation-wrap"},V=(0,d.createTextVNode)("新增"),T={class:"table-wrap"};var h={__name:"index",setup(e){const t=(0,m.tv)(),n=(0,d.ref)([]),p=(0,d.ref)(n.value),h=()=>{p.value=n.value.filter((e=>e.name.indexOf(I.name)>-1&&e.key.indexOf(I.key)-1))},Z=()=>{I.name="",I.key="",p.value=n.value},_=async()=>{const e=await(0,f.findComponents)();n.value=e.map((e=>({...e,createTime:y()(+e.createTime).format("YYYY-MM-DD HH:mm:ss"),updateTime:y()(+e.updateTime).format("YYYY-MM-DD HH:mm:ss")}))),h()},b=()=>t.push({name:"editor"}),g=async(e,t)=>{await(0,f.deleteComponet)(e),_(),(0,k.unregistComponet)(t),l.ZP.success({content:"删除成功",duration:3})},I=(0,d.reactive)({name:"",key:""}),P=(0,d.ref)([{title:"名称",dataIndex:"name",key:"name"},{title:"key",dataIndex:"key",key:"key"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"最后更新时间",dataIndex:"updateTime",key:"updateTime"},{title:"操作",dataIndex:"action",customRender:({record:e})=>(0,d.createVNode)(d.Fragment,null,[(0,d.createVNode)(u.Z,{size:"small",type:"link",onClick:()=>t.push({name:"editor",params:{id:e.id}})},{default:()=>[(0,d.createTextVNode)("编辑")]}),(0,d.createVNode)(i.Z,{type:"vertical"},null),(0,d.createVNode)(c.Z,{title:"确认删除此组件？",okText:"确认",cancelText:"取消",onConfirm:()=>g(e.id,e.key)},{default:()=>[(0,d.createVNode)(u.Z,{size:"small",type:"link",onClick:()=>v.log(e)},{default:()=>[(0,d.createTextVNode)("删除")]})]})])}]);return(0,d.onMounted)((()=>{_()})),(e,t)=>((0,d.openBlock)(),(0,d.createBlock)((0,d.unref)(s.PageContainer),null,{default:(0,d.withCtx)((()=>[(0,d.createElementVNode)("div",C,[(0,d.createVNode)((0,d.unref)(r.ZP),{layout:"inline",model:I},{default:(0,d.withCtx)((()=>[(0,d.createVNode)((0,d.unref)(r.ZP).Item,{label:"组件名称",name:"name"},{default:(0,d.withCtx)((()=>[(0,d.createVNode)((0,d.unref)(o.ZP),{value:I.name,"onUpdate:value":t[0]||(t[0]=e=>I.name=e)},null,8,["value"])])),_:1}),(0,d.createVNode)((0,d.unref)(r.ZP).Item,{label:"组件key",name:"key"},{default:(0,d.withCtx)((()=>[(0,d.createVNode)((0,d.unref)(o.ZP),{value:I.key,"onUpdate:value":t[1]||(t[1]=e=>I.key=e)},null,8,["value"])])),_:1}),(0,d.createVNode)((0,d.unref)(r.ZP).Item,null,{default:(0,d.withCtx)((()=>[(0,d.createVNode)((0,d.unref)(u.Z),{type:"primary",onClick:h},{default:(0,d.withCtx)((()=>[w])),_:1})])),_:1}),(0,d.createVNode)((0,d.unref)(r.ZP).Item,null,{default:(0,d.withCtx)((()=>[(0,d.createVNode)((0,d.unref)(u.Z),{onClick:Z},{default:(0,d.withCtx)((()=>[x])),_:1})])),_:1})])),_:1},8,["model"])]),(0,d.createElementVNode)("div",N,[(0,d.createVNode)((0,d.unref)(u.Z),{type:"primary",onClick:b},{default:(0,d.withCtx)((()=>[V])),_:1})]),(0,d.createElementVNode)("div",T,[(0,d.createVNode)((0,d.unref)(a.ZP),{class:"table",dataSource:p.value,columns:P.value,size:"middle"},null,8,["dataSource","columns"])])])),_:1}))}};const Z=h;var _=Z}}]);
//# sourceMappingURL=component-list.dae5c0f3.js.map