"use strict";(self["webpackChunkonline_conplier"]=self["webpackChunkonline_conplier"]||[]).push([[569],{25800:function(e,t,a){a.r(t),a.d(t,{default:function(){return I}});a(20867);var n=a(54124),l=(a(24348),a(50278)),r=(a(6566),a(57848)),d=(a(64339),a(65735)),u=(a(37173),a(86013)),c=(a(24535),a(5676)),o=(a(1350),a(83438)),i=a(10311),m=a(22483),s=a(47932),f=a(51435);a(15941);async function p(){const e=await f.db.pages.reverse().sortBy("updateTime");return e}async function k(e){await f.db.pages["delete"](e)}var y=a(55743),v=a.n(y),x=a(15941);const N={class:"filter-wrap"},V=(0,i.createTextVNode)("搜索"),w=(0,i.createTextVNode)("重置"),C={class:"operation-wrap"},T=(0,i.createTextVNode)("新增"),Z={class:"table-wrap"};var h={__name:"index",setup(e){const t=(0,m.tv)(),a=(0,i.ref)([]),f=(0,i.ref)(a.value),y=()=>{f.value=a.value.filter((e=>e.name.indexOf(b.name)>-1&&e.key.indexOf(b.key)-1))},h=()=>f.value=a.value,_=async()=>{const e=await p();a.value=e.map((e=>({...e,createTime:v()(+e.createTime).format("YYYY-MM-DD HH:mm:ss"),updateTime:v()(+e.updateTime).format("YYYY-MM-DD HH:mm:ss")}))),y()},I=()=>t.push({name:"pageEditor"}),P=async e=>{await k(e),_(),o.ZP.success({content:"删除成功",duration:3})},b=(0,i.reactive)({name:"",key:""}),Y=(0,i.ref)([{title:"名称",dataIndex:"name",key:"name"},{title:"key",dataIndex:"key",key:"key"},{title:"创建时间",dataIndex:"createTime",key:"createTime"},{title:"最后更新时间",dataIndex:"updateTime",key:"updateTime"},{title:"操作",dataIndex:"action",customRender:({record:e})=>(0,i.createVNode)(i.Fragment,null,[(0,i.createVNode)(c.Z,{size:"small",type:"link",onClick:()=>t.push({name:"pageEditor",params:{id:e.id}})},{default:()=>[(0,i.createTextVNode)("编辑")]}),(0,i.createVNode)(u.Z,{type:"vertical"},null),(0,i.createVNode)(d.Z,{title:"确认删除此组件？",okText:"确认",cancelText:"取消",onConfirm:()=>P(e.id)},{default:()=>[(0,i.createVNode)(c.Z,{size:"small",type:"link",onClick:()=>x.log(e)},{default:()=>[(0,i.createTextVNode)("删除")]})]})])}]);return(0,i.onMounted)((()=>{_()})),(e,t)=>((0,i.openBlock)(),(0,i.createBlock)((0,i.unref)(s._z),null,{default:(0,i.withCtx)((()=>[(0,i.createElementVNode)("div",N,[(0,i.createVNode)((0,i.unref)(r.ZP),{layout:"inline",model:b},{default:(0,i.withCtx)((()=>[(0,i.createVNode)((0,i.unref)(r.ZP).Item,{label:"页面名称",name:"name"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)((0,i.unref)(l.ZP),{value:b.name,"onUpdate:value":t[0]||(t[0]=e=>b.name=e)},null,8,["value"])])),_:1}),(0,i.createVNode)((0,i.unref)(r.ZP).Item,{label:"页面key",name:"key"},{default:(0,i.withCtx)((()=>[(0,i.createVNode)((0,i.unref)(l.ZP),{value:b.key,"onUpdate:value":t[1]||(t[1]=e=>b.key=e)},null,8,["value"])])),_:1}),(0,i.createVNode)((0,i.unref)(r.ZP).Item,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)((0,i.unref)(c.Z),{type:"primary",onClick:y},{default:(0,i.withCtx)((()=>[V])),_:1})])),_:1}),(0,i.createVNode)((0,i.unref)(r.ZP).Item,null,{default:(0,i.withCtx)((()=>[(0,i.createVNode)((0,i.unref)(c.Z),{onClick:h},{default:(0,i.withCtx)((()=>[w])),_:1})])),_:1})])),_:1},8,["model"])]),(0,i.createElementVNode)("div",C,[(0,i.createVNode)((0,i.unref)(c.Z),{type:"primary",onClick:I},{default:(0,i.withCtx)((()=>[T])),_:1})]),(0,i.createElementVNode)("div",Z,[(0,i.createVNode)((0,i.unref)(n.ZP),{class:"table",dataSource:f.value,columns:Y.value,size:"middle"},null,8,["dataSource","columns"])])])),_:1}))}};const _=h;var I=_}}]);
//# sourceMappingURL=page-list.d093335e.js.map